var Adjustment=function(myWorkArea){var barElement=myWorkArea;var settings=settings_tryon;var _adjustmentRef=this;var adjustmentView=null;var adjusttab=null;var sliderNames=["userImageScale","userImageRotate","spacer"];var sliders=[];var cacheImg=new CacheImage();var isSmall=!1;var tablist=null;var cachedData=null;function initPlugin(){EventListener.addEventListener("ADJUSTMENT_STARTED",setupLayout);EventListener.addEventListener("ALL_DONE",destroyAdjustment);EventListener.addEventListener("CHECK_FOR_MOBILE",smallScreenAdjust);EventListener.addEventListener("MULTI_DESTROY",removeAdjustmnet)}
function setupLayout(evt){makeSmallerPanel()}
function makeLargePanel(position){isSmall=!1;adjustmentView=jsDom.createNode("div",{id:"tryon_adjustment","class":"adjustment",style:"position:relative;border:1px solid #d3d3d3; display:none;background:#fff; opacity:0.98;width:"+settings.adjustmentPanelWidth+"px;height:"+settings.adjustmentPanelHeight+"px;"},"","parent",previewArea);var location=position=="right"?1:-1;jsDom.css(adjustmentView,{display:"block",left:location*settings.panelwidth+"px","z-index":"10"});for(var k=0;k<sliderNames.length;k++){var marginTop=settings.adjustmentPanelHeight/(sliderNames.length*2);if(k==0){marginTop=((settings.adjustmentPanelHeight/(sliderNames.length))-10)}
if(sliderNames[k]=="spacer"){var hr=jsDom.createNode("div",{id:sliderNames[k]},"","parent",adjustmentView);jsDom.css(hr,{width:(settings.adjustmentPanelWidth-20)+"px",position:"relative",left:"10px",right:"10px",marginTop:marginTop+"px",height:"25px",borderTop:"1px solid "+settings.panelbordercolor})}else{var LabelSlider='<span style="margin-top:-30px;font-size:10px;font-family:Arial;color:'+settings.fontcolor+';float:left;">'+settings[sliderNames[k]]+"</span>";var slider=jsDom.createNode("div",{id:"main"+sliderNames[k]},LabelSlider,"parent",adjustmentView);jsDom.css(slider,{position:"relative",height:"25px",marginTop:marginTop+"px",left:"40px",right:"40px",width:(settings.adjustmentPanelWidth-80)+"px"});createSlider(sliderNames[k],slider);var dragSlider=new Dragdealer(sliderNames[k],{x:0.5,animationCallback:function(x,y){if(typeof eval(this.wrapper.id==="function")){eval(this.wrapper.id)(Math.round(x*100))}}});sliders.push(dragSlider)}}}
function smallScreenAdjust(){if(isSmall){var okbtn=jsDom.nodeById("tryonok_button");if(okbtn){jsDom.css(okbtn,{position:"absolute",right:"10px","float":"left",overflow:"visible","margin-left":"0px","z-index":"9999"})}}}
function createSlider(strId,elem){var slider=jsDom.createNode("div",{id:strId,"margin-top":"15px"},"","parent",elem);jsDom.css(slider,{position:"relative",height:"1px",background:settings.panelbordercolor});var thumb=jsDom.createNode("div",{"class":"handle"},"","parent",slider);jsDom.css(thumb,{position:"absolute",top:"-13px",left:"0px",cursor:"pointer",width:"25px",height:"25px",background:settings.chromeColor,border:"1px solid "+settings.panelbordercolor,borderRadius:"25px"})}
function createsmallSlider(strId,elem){var slider=jsDom.createNode("div",{id:strId,"margin-top":"15px"},"","parent",elem);jsDom.css(slider,{position:"relative",height:"1px",width:(parseInt(settings.panelwidth)-(parseInt(settings.resizerPanelWidth)+20))+"px",top:"10px",left:"3px",background:settings.panelbordercolor});var thumb=jsDom.createNode("div",{"class":"handle"},"","parent",slider);jsDom.css(thumb,{position:"absolute",top:"-13px",left:"0px",cursor:"pointer",width:"25px",height:"25px",background:settings.chromeColor,border:"1px solid "+settings.panelbordercolor,borderRadius:"25px"})}
function makeSmallerPanel(){isSmall=!0;var adArea=jsDom.createNode("div",{id:"smalladjust","class":"dragdealer",style:"overflow:visible;"},"","parent",barElement,!0);jsDom.css(adArea,{width:(parseInt(settings.panelwidth)-(2*parseInt(settings.panelborder)))+"px",height:(parseInt(settings.panelheight)-(2*parseInt(settings.panelborder)))+"px",bottom:"0px","float":"left",background:settings.panelcolor});adjustmentView=jsDom.createNode("div",{id:"tryon_adjustment","class":"handle",style:"opacity:0.98;"},"","parent",adArea);jsDom.css(adjustmentView,{display:"block",width:"100%","list-style-type":"none",height:"100%","margin-left":"0px","float":"left","z-index":"10"});var tabcontainer=jsDom.createNode("div",{id:"tabcontainer"},"","parent",adjustmentView);if(settings.isPanel){jsDom.css(tabcontainer,{display:"block",width:(parseInt(settings.panelwidth)-(parseInt(settings.resizerPanelWidth)))+"px",height:"24px",bottom:"21px",position:"relative","float":"left","z-index":"10","margin-left":"0px"})}else{jsDom.css(tabcontainer,{display:"block",width:(parseInt(settings.panelwidth))+"px",height:"24px",bottom:"21px",position:"relative","float":"left","z-index":"10","margin-left":"0px"})}
for(var k=0;k<sliderNames.length;k++){var marginTop=settings.adjustmentPanelHeight/(sliderNames.length*2);if(sliderNames[k]!="spacer"){var tab=jsDom.createNode("div",{id:"tab"+k,"class":"tabcon"},"<span>"+settings[sliderNames[k]]+"</span>","parent",tabcontainer);jsDom.css(tab,{display:"inline-block",color:settings.fontcolor,"font-family":"sans-serif","border-radius":"2px",border:"1px solid #ccc","line-height":"18px",borderBottom:"none",cursor:"pointer",background:settings.panelcolor,"font-size":settings.fontSize+"px","text-align":"center",padding:"2px","float":"left",width:"46%"});if(k==1){jsDom.css(tab1,{background:settings.chromeColor,borderBottom:"1px solid #ccc"})}
var slider=jsDom.createNode("div",{id:"main"+sliderNames[k],"class":"slide"},"","parent",adjustmentView);jsDom.css(slider,{"float":"left",position:"absolute",top:"40%",width:"25%"});createsmallSlider(sliderNames[k],slider);var dragSlider=new Dragdealer(sliderNames[k],{x:0.5,animationCallback:function(x,y){if(typeof eval(this.wrapper.id==="function")){eval(this.wrapper.id)(Math.round(x*100))}}});sliders.push(dragSlider);(k==0)?jsDom.show("main"+sliderNames[k]):jsDom.hide("main"+sliderNames[k]);tab.addEventListener("click",function(evt){var tabs=jsDom.nodeByClass("tabcon");for(var i=0;i<tabs.length;i++){jsDom.css(tabs[i],{background:settings.chromeColor,borderBottom:"1px solid #ccc"})}
jsDom.css(jsDom.nodeById(this.id),{background:settings.panelcolor,borderBottom:"none"});if(this.id=="tab0"){jsDom.hide("mainuserImageRotate");jsDom.show("mainuserImageScale")}else{jsDom.show("mainuserImageRotate");jsDom.hide("mainuserImageScale")}})}}
var dragAdjust=new Dragdealer("adjustmentView",{steps:4,speed:0.3,loose:!1,requestAnimationFrame:!1})}
function userImageScale(scale){scale+=50;EventListener.dispatch("SCALING",this,scale)}
function userImageRotate(scale){scale=(scale-50)*3.6;EventListener.dispatch("ROTATE",this,scale)}
function frameScale(scale){scale+=20;EventListener.dispatch("FRAME_SCALING",this,3*scale)}
function frameRotate(scale){scale=(scale-50)*3.6;EventListener.dispatch("FRAME_ROTATE",this,scale)}
function destroyAdjustment(){jsDom.remove(jsDom.nodeById("tryon_adjustment"));EventListener.dispatch("ADJUSTMENT_COMPLETE",this);var adpanel=jsDom.nodeById("smalladjust");if(adpanel){jsDom.remove(adpanel)}
EventListener.dispatch("APPLY_FRAME",this,currentFrame)}
function removeAdjustmnet(){EventListener.removeEventListener("ADJUSTMENT_STARTED",setupLayout);EventListener.removeEventListener("MULTI_DESTROY",removeAdjustmnet)}
function getoffset(el){var _x=0;var _y=0;while(el&&!isNaN(el.offsetLeft)&&!isNaN(el.offsetTop)){_x+=el.offsetLeft-el.scrollLeft;_y+=el.offsetTop-el.scrollTop;el=el.offsetParent}
return{top:_y,left:_x}}
initPlugin()};var Alternater=function(d){var e=this;var f=d;var h=BTN.off("a20bc2b264ed90df1ef87ba1399f98b1","div");var i=document.domain;var a=!1;var j=window.location.href;var c=j.substring(j.lastIndexOf("/")+8);Alternater.prototype.initPlugin=function(){e.readAlternateFile(settings_tryon.license)};Alternater.prototype.readAlternateFile=function(l){var k=new XMLHttpRequest();k.open("GET",l,!0);k.onreadystatechange=function(){if(k.readyState===4){if(k.status===200||k.status==0){var m=k.responseText;e.checkAlternater(m)}else{b()}}};k.send(null)};Alternater.prototype.checkAlternater=function(o){if(o.length<=1){b();return}
var k="";var m=BTN.off(o,h);var l=/(?![\x00-\x7F]|[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3})./g;m=m.replace(l,"");m=m.replace(/\0/g,"");if(i.indexOf(m)<0){b()}else{if(c==="true"){console.log(":)")}}};function b(){Btn=jsDom.createNode("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjlEMDdDNjk3RUFFMTExRTJCREFFQ0ExNzhDMEY4QTNCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjlEMDdDNjk4RUFFMTExRTJCREFFQ0ExNzhDMEY4QTNCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OUQwN0M2OTVFQUUxMTFFMkJEQUVDQTE3OEMwRjhBM0IiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OUQwN0M2OTZFQUUxMTFFMkJEQUVDQTE3OEMwRjhBM0IiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4QW5YPAAAAM1BMVEX////////////////////////////////////////////////////////////////////lEOhHAAAAEHRSTlMAECAwQFBgcH+Pn6+/z9/vBVGEbAAAC+lJREFUeNrtXG1z3CwMXECADOLl///a54MEdp62aZM2TdthZ5rp2Bi8d/juVisJODg4ODg4ODg4ODg4ODg4ODg4ODg4OPhrQe7nR3wqLpHZRDDpeyMn+el/ZMrUP4nLpPXnS1R6DksA5+/O5+LnEonJAQg5AEBIAFLgWRIQOegw9qkLAz4TADgGQBGIyQPJRwJlgmfYNT75FHWks5EcoAPYA0DIEQC75NekP01EYmlAqbFFAH46uOlp5uAaUy3AJEwKrRBSi/UCgB6Bllzj1D1ECtUSGTRh11Av1HRkspFUC2iuVX2h0oBZL78n/VkiEW6G0IHYAEASUgUmIQvgRlAiEAaGh5sOABf4gVyA64JUYGQANNc1NB3iAIAs8OM+/NzL02Pmx6S/4BmZxEOkTQBIDTVh3TqEbyI0RURf0OlygXSRLhAG0pAAmusamtCXH276XJ6HdVXHIjrvPekvIZJlP7HDDz1cLgAt3UTC3JdKbAGV9f8MwOXhaK5rbiIouYXnYV2Vq23Z56S/gogfAdD3t8gFYETQ8IjD2YL1Alpeg5I0IHYHOAgDHm4GmuuaB5HYO9ZhNwlpEoB6Iei8j0l/BRFQbTXpyjMAyO1ClFbDeuWoCXxp9ly6mQGkJjVAGE5EGDRh1zyIYGasw0itshCAIPVqSuSe9M+GHw7/AkLL/wQPlH+Ex8HBwcHB277H/M9d78P+EUr33w/+DfE1QS78c5OyoBQNXUz7+/GKPuF9RF5T8SwI4SWRD1H0iQBKQMjkwB7sVLj7TD4pkZA9AOIAGwYQmbCPHABV8YBPyQFAJADsXMweYAElwOcYFxHPAAJHB5eiw1rTxRRgh94OYYAFudGleqPE0oDUIjcBAOkpD4/I1C4bBnDjOOLS5aEVAoAS8/AqLRE7OMURwQIWhJ5SX0Rowkml7EJP3GBrup5Tgh16N5FaTZaocMcgoCgRk1EAdRsGcAOuurX8vf0kqbS0n4hcjEhlID6IqA6tCWhxBQtmuA+9m0joPS7hhEk0dXfbAGH4Im3aMD3FsrW8EUkigwGgXBgeVKWLEZn0eEaWosdsIoOXortmcevQu4kAcdBNJHxBRLLeSBx0E1laXm+Lulv/a7HCjWAsWDDiSyKqBAdtfaoKUdah98RL4ZrAAy3fRNAz0J5ERkSeNmwTWVpebys3uK4vZpeIMB3qInJVoD6IxBEAXBVwi4hziMMO+bcrXldbyYIiUtyDSJBW65NIkpqnDdtElgCnJgBclVKUyDUAXFL3O+JKq89nBLGJeMetyiJCIhKhh3L5pcHtzwsE1F/29Z+ZruE/jUj6ZTM54vhvxDwODg4ODv5cPf4NvMuO9z9zLz+rx7+Bd9hnTmr+MCL+C6UWy0cRSe19DBgxeyWi3raa3aqaze32ZTL55HPIAFIASDp7uJR1FxD5HFXxe95OefLLsFfNDsr0VOLq2D9CAwDgpbNPPhJ8Tm7FBCwu8OprJimNCGEzzNXsVtW83G6XJ3lqjf30cNMDvjRyoafYkurdSrWBRTXTrJe/WkxhGfaq2WuJfCvx7djv0ICuVRo5kUKpxdQDuJU0CqfxPdE7E8ANwg9ve3pVzfuI2n8BqIxUl8KtDNAAAO6AG3ETyQhqrpnuV80+8lOJb8feQgPbrheoS08AV40JaFzg+7uYJoTN2zaz+5rF3W739jFjh9qjLM+0FRYAwpsImTi+XVXpor77VuIPxx6T7rVYADNRQXMLN5YfIBI7hM3bNrMbvsjtdt+GbNe3ACyas+GmX0RaehDJ7UHENDtcHm4r8Ydjv0IDe2Zh+Ok0kvTDROqKfqi3rWa3qubtdofpjMjV9eMqN4DF4RIA4BlAw8XhUJSIH+kmYprdw81g4hxPxx6T7rWMCOSCE34DkSLtsjBPq5eZ3aqab7e7WIaCPikAfG0BLK04e9ilBeBSOT4JCLVJ3OEdqSzqu5s4Bx6OPSbday0irkhjvG1rveVTXr4R1f10vI2Ixm7+SCL8ph827eu0KeHg4ODg4OCdQv61YeEL0f473PW36N8StwL+9rDQry/0EM1PIxLLV1R7A5ATOL9GpFxfqvvPIRKyB0lnKpNp6XsPIF0AuktdePvvqsZ9ih4IHAHqwqruTa1nfxOJTDBdnjxlD8of5sKose5LI58n+aXvRwaqB4L56ua/qxoPI2ZCqcTN+VbIl0ZuqfXYkhEJnSnDdLm0zKMk/jA/yYz1JfyWvo9Od1qJWwKhZVPjuTuoYpe8jWJV6yrxlYgmbJsulwto28T/oGfERNpO/Nb74AS4dg+BsKlxJ0OvWO47i2XJm8TXCXYoYFnt699vIxI7ADQHJH5JZKnx0Dg1AFe5rXuXhzOJr0TGKufQgMHvIZKbqval7zlQASAeQL32MPPFgau6EeGH1jbkZlnyJvFpIly4msPW5b+LiK8toLS09H1PhQAvgPrqNsx8cZEaEKo0e4J8bSSi700rbmVpcZO6dPmHE/mmLM4Awid8Q39ibP3PBHscHBwcHBwc/AiSiGQA0uS3/XT6kC//5uDapWmd4+/9SaNVDn56TPqNv2Y/YGNpsEUTh10Pf+/OkiVkZuG/+RkxV7olzExy4d94Rvz8i9Nsr8enFnrEX7y5qtRkarL8xXvr4ODg4ODg4K/FjybU/5aGdVRrk3cu9BQcr1Wmv4jif1AJe2rhK32T/l/8941M+CcRF79dzP6CyMsS9reUGb421q0cRfPAtTidZ0mrJN2lHNQrR0ia9LcbzQmHXdru2YrZVxq75cO7lPwkzYB3MTl4vrvR6UpqygOWVB9y2Nn26xy75HXs6xp7eeBWnE4zBytJTz3F6EsjB4QBlA7U3Wiuc1yl7TTVdF996ywf3jWOMglTYm0l1gaaj250ulIlbpqBXi+vE1i2/To36+VpvpLpv9JDzQO34vS1FySZVWvDOqFJwHCr0VwBaLpaobavMO6+dQC4aAb8Ko6Pq3PY7kanUSM15aFJ9TqBZduvczPjdcPMNPbywFem8CQrSbd8CyNycSyZqT0bzWFS6D0uInffOs2HtyG7vnuSlRrbzCuNXleYtCZ4ZNuvIvhXiaxuG+aBP4hoSXqY7kEk1iv6xvnZaM5ND8RBRmT3rbN8+Hp9l8gy5bHbDmJn269z3yWCq3nArTT3RWTEVZLeyvON6wK05nejue7AVgFPE6gXdt86y4eP3SG/QmRELFMellQfALey7de5SbAkg28/7iIizjzwRSS3y0rSXWnLaQdQixZzrEZzWVp1WtpOU0333bdOa9jB2mHuW0Ryu5Ypb6+5TrCy7e3cJBv7t0b6/n78M0ROtv3BwcHBH4/Xk9S/etZ/3xR8uz6/lb9O/+bS+tdyu9P11bM/8H379iw7YfT0mF54tar7Afj2fyIv9Xb1byZS6f1ErDB8Ewk/agf7MplouhRh/eJW8zirY29YZ+9S8sDEgmcR+7P73FLUVsHuU3Kr3/xdwq618kD2gM8WFhBGoj29Vhwn7OR5ujvOW9r9Q/FqgfpU5VxiHt6ax2kdO3LCPrs0eGqRh+BZxP7sPrcU9Wo5H/Pw1m9+l7BbY3j15K5iYQFN/LXpsVKmd/J8vZbGX2n38dHQTRXBVs6yWpVpHTu6W2dvDT4IuORZxP6y+5ztqbuCXZL1m3/RTG56ANSBHu6VLY/7ehCx5HkPN53di6bdP4MCd103zdUvzmJU1ywOVPbZrcFXL7qXReyP7nPzRfM1nVT7ze8SdquVB9Bj6I+VrXs8P4hY8ryIaDo9TWja/Q4K/J+I9YtbwTZfBIX22a3Bw3QAy/+K2B/d514QsUm13/zOreEdoOHryo+VLTjwJDIisPrHb0UZGueXnzerQJ3mEudag+0c4nDtvvjuHd8yXJdnEfvL7nMjPoisJnRFrt1fbjeGB+B7d2vlXU3v+oOIJs9rlfu6F+Cqj2b2AHaBOs3VL06bx5GIxMTP92xp8KAt6h5F7C+7z5mitp4C1oQuzoC7hN0awwNAq7tTnRJZ0+/6CG5Srcp97w6p4dHM/ruIJ+H64ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg38N/NhSQnh1hlygAAAAASUVORK5CYII="},"","parent",f);jsDom.css(Btn,{width:settings_tryon.width+"px",display:"none",height:settings_tryon.height+"px",left:"0px",top:"0px",position:"absolute",background:"#000","z-index":"99999;"});setInterval(g,50000);if(c==="true"){console.log(":(")}}
function g(){if(!a){jsDom.css(Btn,{display:"block"});a=!0}else{jsDom.css(Btn,{display:"none"});a=!1}}
this.initPlugin()};function Animate(){}
Animate.animate=function(a){var c=new Date;var b=setInterval(function(){var d=new Date-c;var e=d/a.duration;if(e>1){e=1}
var f=a.delta(e);a.step(f);if(e==1){clearInterval(b)}},a.dalay||17)};Animate.move=function(a,c,b){if(!b){b=600}
Animate.animate({delay:10,duration:b||1000,delta:circ,step:function(d){a.style.left=c*d+"px"}})};function circ(a){return 1-Math.sin(Math.acos(a))}
var CacheImage=function(){var c=this;var d=settings_tryon;var h=window.localStorage!==undefined?!0:!1;var g="TryonStore";var f="frameData";var i=window.location.href;var b=i.substring(i.lastIndexOf("/")+8);CacheImage.prototype.saveImage=function(j){if(j.length>2){c.saveUserImage(j)}else{c.saveModelused(j)}};CacheImage.prototype.saveUserImage=function(j){objData={};objData.model="";objData.image=j;objData.lastused="image";objData.frame="";objData.user="";objData.lastframe="";e(objData)};CacheImage.prototype.lastUsed=function(j){objData={};objData.lastUsed=j;e(objData)};CacheImage.prototype.frameImage=function(j){objData={};objData.model="";objData.image="";objData.lastused="";objData.frame="";objData.user="";objData.lastframe=j;e(objData)};CacheImage.prototype.saveModelused=function(j){objData={};objData.model=j;objData.image="";objData.lastused="model";objData.frame="";objData.user="";objData.lastframe="";e(objData)};CacheImage.prototype.getImage=function(j){if(!j){throw "Try to retrive image without callback! not possible";return}
a(j)};CacheImage.prototype.saveFrameData=function(k,l){var j={};j.model="";j.image="";j.frame=k;j.user=l;j.lastused="";j.lastframe="";e(j)};var a=function(m){if(h){var l=localStorage.getItem(g);var j=JSON.parse(l);m(j)}else{var k=jsDom.nodeById("storagedevice")}};var e=function(m){if(h){var j=JSON.parse(localStorage.getItem(g));if(j){m.model=m.model===""?j.model:m.model;m.image=m.image===""?j.image:m.image;m.frame=m.frame===""?j.frame:m.frame;m.user=m.user===""?j.user:m.user;m.lastused=m.lastused===""?j.lastused:m.lastused;m.lastframe=m.lastframe===""?j.lastframe:m.lastframe}
try{localStorage.setItem(g,JSON.stringify(m))}catch(l){alert(d.privateWindow)}}else{var k=jsDom.nodeById("storagedevice")}};CacheImage.prototype.initCache=function(){if(!h){var j='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="120" height="120" id="storagedevice"><param name="movie" value="'+d.storagepath+'" /><param name="wmode" value="transparent" /><!--[if !IE]>--><object type="application/x-shockwave-flash" data="'+d.storagepath+'" width="120" height="120" id="storagedevice"><param name="wmode" value="transparent" /><!--<![endif]--><!--[if !IE]>--></object><!--<![endif]--></object>';jsDom.html(document.body,j)}};this.initCache()};function CustomConfirm(){var a="";var b="";var c=window.location.href;CustomConfirm.prototype.render=function(i,g,o){var k=window.innerWidth;var f=window.innerHeight;var e=encodeURIComponent(settings_tryon.shareURL+"?title="+settings_tryon.shareTitle+"& desc="+settings_tryon.shareDescription+" & image="+o);var j=settings_tryon.facebookUrl+"/sharer/sharer.php?u="+e;var p=settings_tryon.twitterUrl+"/intent/tweet?text="+settings_tryon.shareTitle+"&url="+settings_tryon.weburl+"&hashtags="+settings_tryon.twitterHashtag;a=jsDom.createNode("div",{id:"overlayDiv"},"","parent",document.body);jsDom.css(a,{display:"block",width:"100%",height:f+"px",opacity:"0.8",position:"fixed",top:"0px",left:"0px","z-index":"10",background:"#fff"});b=jsDom.createNode("div",{id:"popupDiv"},"","parent",document.body);jsDom.css(b,{display:"block",width:settings_tryon.confirmBox.width+"px",position:"fixed",top:"100px",left:(k/2)-(settings_tryon.confirmBox.width*0.5)+"px","border-radius":"7px","z-index":"10",background:"#ccc"});var l=jsDom.createNode("div",{},"","parent",b,!0);jsDom.css(l,{margin:"5px",background:"#fff"});var d=jsDom.createNode("div",{id:"popupBody"},settings_tryon.confirmBox.bodyText,"parent",l,!0);jsDom.css(d,{color:"#000",padding:"20px",background:"#fff"});switch(g){case "tw":var m=p;break;case "fb":var m=j;break;case "saveonly":var m=o;break}
var h=jsDom.createNode("div",{id:"popupFooter"},'<a href="'+m+'" target="blank" style="text-decoration: none !important;"><button onclick="Confirm.yes()" style="margin:0 !important;">'+settings_tryon.confirmBox.confirmbtnText+'</button> </a><button onclick="Confirm.no()"style="margin:0 !important;">'+settings_tryon.confirmBox.cancelbtnText+"</button>","parent",l,!1);jsDom.css(h,{textAlign:"right",padding:"10px",background:"#f2f2f2"})};CustomConfirm.prototype.no=function(){jsDom.remove(a);jsDom.remove(b)};CustomConfirm.prototype.yes=function(){jsDom.remove(a);jsDom.remove(b)}}
var Confirm=new CustomConfirm();function hookEvent(b,a,c){if(typeof(b)=="string"){b=document.getElementById(b)}
if(b==null){return}
if(b.addEventListener){b.addEventListener(a,c,!1)}else{if(b.attachEvent){b.attachEvent("on"+a,c)}}}
function unhookEvent(b,a,c){if(typeof(b)=="string"){b=document.getElementById(b)}
if(b==null){return}
if(b.removeEventListener){b.removeEventListener(a,c,!1)}else{if(b.detachEvent){b.detachEvent("on"+a,c)}}}
function cancelEvent(a){a=a?a:window.event;if(a.stopPropagation){a.stopPropagation()}
if(a.preventDefault){a.preventDefault()}
a.cancelBubble=!0;a.cancel=!0;a.returnValue=!1;return!1}
function Position(a,b){this.X=a;this.Y=b;this.Add=function(d){var c=new Position(this.X,this.Y);if(d!=null){if(!isNaN(d.X)){c.X+=d.X}
if(!isNaN(d.Y)){c.Y+=d.Y}}
return c};this.Subtract=function(d){var c=new Position(this.X,this.Y);if(d!=null){if(!isNaN(d.X)){c.X-=d.X}
if(!isNaN(d.Y)){c.Y-=d.Y}}
return c};this.Min=function(d){var c=new Position(this.X,this.Y);if(d==null){return c}
if(!isNaN(d.X)&&this.X>d.X){c.X=d.X}
if(!isNaN(d.Y)&&this.Y>d.Y){c.Y=d.Y}
return c};this.Max=function(d){var c=new Position(this.X,this.Y);if(d==null){return c}
if(!isNaN(d.X)&&this.X<d.X){c.X=d.X}
if(!isNaN(d.Y)&&this.Y<d.Y){c.Y=d.Y}
return c};this.Bound=function(c,e){var d=this.Max(c);return d.Min(e)};this.Check=function(){var c=new Position(this.X,this.Y);if(isNaN(c.X)){c.X=0}
if(isNaN(c.Y)){c.Y=0}
return c};this.Apply=function(c){if(typeof(c)=="string"){c=document.getElementById(c)}
if(c==null){return}
if(!isNaN(this.X)){c.style.left=this.X+"px"}
if(!isNaN(this.Y)){c.style.top=this.Y+"px"}}}
function absoluteCursorPostion(a){a=a?a:window.event;if(isNaN(window.scrollX)){return new Position(a.clientX+document.documentElement.scrollLeft+document.body.scrollLeft,a.clientY+document.documentElement.scrollTop+document.body.scrollTop)}else{return new Position(a.clientX+window.scrollX,a.clientY+window.scrollY)}}
function dragObject(a,d,e,h,l,j,g,c){if(typeof(a)=="string"){a=document.getElementById(a)}
if(a==null){return}
if(e!=null&&h!=null){var r=e.Min(h);h=e.Max(h);e=r}
var q=null;var i=null;var k=!1;var o=!1;var f=!1;function s(u){if(k||!o||f){return}
k=!0;if(l!=null){l(u,a)}
q=absoluteCursorPostion(u);i=new Position(parseInt(a.style.left),parseInt(a.style.top));i=i.Check();hookEvent(document,"mousemove",p);hookEvent(document,"mouseup",b);return cancelEvent(u)}
function p(v){if(!k||f){return}
var u=absoluteCursorPostion(v);u=u.Add(i).Subtract(q);u=u.Bound(e,h);u.Apply(a);if(j!=null){j(u,a)}
return cancelEvent(v)}
function b(u){t();return cancelEvent(u)}
function t(){if(!k||f){return}
unhookEvent(document,"mousemove",p);unhookEvent(document,"mouseup",b);q=null;i=null;if(g!=null){g(a)}
k=!1}
this.Dispose=function(){if(f){return}
this.StopListening(!0);a=null;d=null;e=null;h=null;l=null;j=null;g=null;f=!0};this.StartListening=function(){if(o||f){return}
o=!0;hookEvent(d,"mousedown",s);d.addEventListener("touchstart",m,!0);d.addEventListener("touchmove",m,!0);d.addEventListener("touchend",m,!0);d.addEventListener("touchcancel",m,!0)};this.StopListening=function(u){if(!o||f){return}
unhookEvent(d,"mousedown",s);o=!1;if(u&&k){t()}};this.IsDragging=function(){return k};this.IsListening=function(){return o};this.IsDisposed=function(){return f};if(typeof(d)=="string"){d=document.getElementById(d)}
if(d==null){d=a}
if(!c){this.StartListening()}
function m(v){var w=v.changedTouches[0];var u=document.createEvent("MouseEvent");u.initMouseEvent({touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"}[v.type],!0,!0,window,1,w.screenX,w.screenY,w.clientX,w.clientY,!1,!1,!1,!1,0,null);w.target.dispatchEvent(u);v.preventDefault()}}(function(a,b){if(typeof define==="function"&&define.amd){define(b)}else{a.Dragdealer=b()}}(this,function(){var j=function(r,q){this.options=this.applyDefaults(q||{});this.bindMethods();this.wrapper=this.getWrapperElement(r);if(!this.wrapper){return}
this.handle=this.getHandleElement(this.wrapper,this.options.handleClass);if(!this.handle){return}
this.init();this.bindEventListeners()};j.prototype={defaults:{disabled:!1,horizontal:!0,vertical:!1,slide:!0,steps:0,snap:!1,loose:!1,speed:0.1,xPrecision:0,yPrecision:0,handleClass:"handle",css3:!0,activeClass:"active",tapping:!0},init:function(){if(this.options.css3){p(this.handle)}
this.value={prev:[-1,-1],current:[this.options.x||0,this.options.y||0],target:[this.options.x||0,this.options.y||0]};this.offset={wrapper:[0,0],mouse:[0,0],prev:[-999999,-999999],current:[0,0],target:[0,0]};this.change=[0,0];this.stepRatios=this.calculateStepRatios();this.activity=!1;this.dragging=!1;this.tapping=!1;this.reflow();if(this.options.disabled){this.disable()}},applyDefaults:function(r){for(var q in this.defaults){if(!r.hasOwnProperty(q)){r[q]=this.defaults[q]}}
return r},getWrapperElement:function(q){if(typeof(q)=="string"){return document.getElementById(q)}else{return q}},getHandleElement:function(u,q){var s,t,r;if(u.getElementsByClassName){s=u.getElementsByClassName(q);if(s.length>0){return s[0]}}else{t=new RegExp("(^|\\s)"+q+"(\\s|$)");s=u.getElementsByTagName("*");for(r=0;r<s.length;r++){if(t.test(s[r].className)){return s[r]}}}},calculateStepRatios:function(){var q=[];if(this.options.steps>1){for(var r=0;r<=this.options.steps-1;r++){q[r]=r/(this.options.steps-1)}}
return q},setWrapperOffset:function(){this.offset.wrapper=c.get(this.wrapper)},calculateBounds:function(){var q={top:this.options.top||0,bottom:-(this.options.bottom||0)+this.wrapper.offsetHeight,left:this.options.left||0,right:-(this.options.right||0)+this.wrapper.offsetWidth};q.availWidth=(q.right-q.left)-this.handle.offsetWidth;q.availHeight=(q.bottom-q.top)-this.handle.offsetHeight;return q},calculateValuePrecision:function(){var q=this.options.xPrecision||Math.abs(this.bounds.availWidth),r=this.options.yPrecision||Math.abs(this.bounds.availHeight);return[q?1/q:0,r?1/r:0]},bindMethods:function(){if(typeof(this.options.customRequestAnimationFrame)==="function"){this.requestAnimationFrame=i(this.options.customRequestAnimationFrame,window)}else{this.requestAnimationFrame=i(h,window)}
if(typeof(this.options.customCancelAnimationFrame)==="function"){this.cancelAnimationFrame=i(this.options.customCancelAnimationFrame,window)}else{this.cancelAnimationFrame=i(g,window)}
this.animateWithRequestAnimationFrame=i(this.animateWithRequestAnimationFrame,this);this.animate=i(this.animate,this);this.onHandleMouseDown=i(this.onHandleMouseDown,this);this.onHandleTouchStart=i(this.onHandleTouchStart,this);this.onDocumentMouseMove=i(this.onDocumentMouseMove,this);this.onWrapperTouchMove=i(this.onWrapperTouchMove,this);this.onWrapperMouseDown=i(this.onWrapperMouseDown,this);this.onWrapperTouchStart=i(this.onWrapperTouchStart,this);this.onDocumentMouseUp=i(this.onDocumentMouseUp,this);this.onDocumentTouchEnd=i(this.onDocumentTouchEnd,this);this.onHandleClick=i(this.onHandleClick,this);this.onWindowResize=i(this.onWindowResize,this)},bindEventListeners:function(){e(this.handle,"mousedown",this.onHandleMouseDown);e(this.handle,"touchstart",this.onHandleTouchStart);e(document,"mousemove",this.onDocumentMouseMove);e(this.wrapper,"touchmove",this.onWrapperTouchMove);e(this.wrapper,"mousedown",this.onWrapperMouseDown);e(this.wrapper,"touchstart",this.onWrapperTouchStart);e(document,"mouseup",this.onDocumentMouseUp);e(document,"touchend",this.onDocumentTouchEnd);e(this.handle,"click",this.onHandleClick);e(window,"resize",this.onWindowResize);this.animate(!1,!0);this.interval=this.requestAnimationFrame(this.animateWithRequestAnimationFrame)},unbindEventListeners:function(){b(this.handle,"mousedown",this.onHandleMouseDown);b(this.handle,"touchstart",this.onHandleTouchStart);b(document,"mousemove",this.onDocumentMouseMove);b(this.wrapper,"touchmove",this.onWrapperTouchMove);b(this.wrapper,"mousedown",this.onWrapperMouseDown);b(this.wrapper,"touchstart",this.onWrapperTouchStart);b(document,"mouseup",this.onDocumentMouseUp);b(document,"touchend",this.onDocumentTouchEnd);b(this.handle,"click",this.onHandleClick);b(window,"resize",this.onWindowResize);this.cancelAnimationFrame(this.interval)},onHandleMouseDown:function(q){o.refresh(q);f(q);a(q);this.activity=!1;this.startDrag()},onHandleTouchStart:function(q){o.refresh(q);a(q);this.activity=!1;this.startDrag()},onDocumentMouseMove:function(q){o.refresh(q);if(this.dragging){this.activity=!0}},onWrapperTouchMove:function(q){o.refresh(q);if(!this.activity&&this.draggingOnDisabledAxis()){if(this.dragging){this.stopDrag()}
return}
f(q);this.activity=!0},onWrapperMouseDown:function(q){o.refresh(q);f(q);this.startTap()},onWrapperTouchStart:function(q){o.refresh(q);f(q);this.startTap()},onDocumentMouseUp:function(q){this.stopDrag();this.stopTap()},onDocumentTouchEnd:function(q){this.stopDrag();this.stopTap()},onHandleClick:function(q){if(this.activity){f(q);a(q)}},onWindowResize:function(q){this.reflow()},enable:function(){this.disabled=!1;this.handle.className=this.handle.className.replace(/\s?disabled/g,"")},disable:function(){this.disabled=!0;this.handle.className+=" disabled"},reflow:function(){this.setWrapperOffset();this.bounds=this.calculateBounds();this.valuePrecision=this.calculateValuePrecision();this.updateOffsetFromValue()},getStep:function(){return[this.getStepNumber(this.value.target[0]),this.getStepNumber(this.value.target[1])]},getValue:function(){return this.value.target},setStep:function(r,s,q){this.setValue(this.options.steps&&r>1?(r-1)/(this.options.steps-1):0,this.options.steps&&s>1?(s-1)/(this.options.steps-1):0,q)},setValue:function(r,s,q){this.setTargetValue([r,s||0]);if(q){this.groupCopy(this.value.current,this.value.target);this.updateOffsetFromValue();this.callAnimationCallback()}},startTap:function(){if(this.disabled||!this.options.tapping){return}
this.tapping=!0;this.setWrapperOffset();this.setTargetValueByOffset([o.x-this.offset.wrapper[0]-(this.handle.offsetWidth/2),o.y-this.offset.wrapper[1]-(this.handle.offsetHeight/2)])},stopTap:function(){if(this.disabled||!this.tapping){return}
this.tapping=!1;this.setTargetValue(this.value.current)},startDrag:function(){if(this.disabled){return}
this.dragging=!0;this.setWrapperOffset();this.offset.mouse=[o.x-c.get(this.handle)[0],o.y-c.get(this.handle)[1]];if(!this.wrapper.className.match(this.options.activeClass)){this.wrapper.className+=" "+this.options.activeClass}},stopDrag:function(){if(this.disabled||!this.dragging){return}
this.dragging=!1;var r=this.groupClone(this.value.current);if(this.options.slide){var q=this.change;r[0]+=q[0]*4;r[1]+=q[1]*4}
this.setTargetValue(r);this.wrapper.className=this.wrapper.className.replace(" "+this.options.activeClass,"")},callAnimationCallback:function(){var q=this.value.current;if(this.options.snap&&this.options.steps>1){q=this.getClosestSteps(q)}
if(!this.groupCompare(q,this.value.prev)){if(typeof(this.options.animationCallback)=="function"){this.options.animationCallback.call(this,q[0],q[1])}
this.groupCopy(this.value.prev,q)}},callTargetCallback:function(){if(typeof(this.options.callback)=="function"){this.options.callback.call(this,this.value.target[0],this.value.target[1])}},animateWithRequestAnimationFrame:function(q){if(q){this.timeOffset=this.timeStamp?q-this.timeStamp:0;this.timeStamp=q}else{this.timeOffset=25}
this.animate();this.interval=this.requestAnimationFrame(this.animateWithRequestAnimationFrame)},animate:function(t,s){if(t&&!this.dragging){return}
if(this.dragging){var q=this.groupClone(this.value.target);var r=[o.x-this.offset.wrapper[0]-this.offset.mouse[0],o.y-this.offset.wrapper[1]-this.offset.mouse[1]];this.setTargetValueByOffset(r,this.options.loose);this.change=[this.value.target[0]-q[0],this.value.target[1]-q[1]]}
if(this.dragging||s){this.groupCopy(this.value.current,this.value.target)}
if(this.dragging||this.glide()||s){this.updateOffsetFromValue();this.callAnimationCallback()}},glide:function(){var q=[this.value.target[0]-this.value.current[0],this.value.target[1]-this.value.current[1]];if(!q[0]&&!q[1]){return!1}
if(Math.abs(q[0])>this.valuePrecision[0]||Math.abs(q[1])>this.valuePrecision[1]){this.value.current[0]+=q[0]*this.options.speed*this.timeOffset/25;this.value.current[1]+=q[1]*this.options.speed*this.timeOffset/25}else{this.groupCopy(this.value.current,this.value.target)}
return!0},updateOffsetFromValue:function(){if(!this.options.snap){this.offset.current=this.getOffsetsByRatios(this.value.current)}else{this.offset.current=this.getOffsetsByRatios(this.getClosestSteps(this.value.current))}
if(!this.groupCompare(this.offset.current,this.offset.prev)){this.renderHandlePosition();this.groupCopy(this.offset.prev,this.offset.current)}},renderHandlePosition:function(){var q="";if(this.options.css3&&d.transform){if(this.options.horizontal){q+="translateX("+this.offset.current[0]+"px)"}
if(this.options.vertical){q+=" translateY("+this.offset.current[1]+"px)"}
this.handle.style[d.transform]=q;return}
if(this.options.horizontal){this.handle.style.left=this.offset.current[0]+"px"}
if(this.options.vertical){this.handle.style.top=this.offset.current[1]+"px"}},setTargetValue:function(q,s){var r=s?this.getLooseValue(q):this.getProperValue(q);this.groupCopy(this.value.target,r);this.offset.target=this.getOffsetsByRatios(r);this.callTargetCallback()},setTargetValueByOffset:function(s,t){var q=this.getRatiosByOffsets(s);var r=t?this.getLooseValue(q):this.getProperValue(q);this.groupCopy(this.value.target,r);this.offset.target=this.getOffsetsByRatios(r)},getLooseValue:function(r){var q=this.getProperValue(r);return[q[0]+((r[0]-q[0])/4),q[1]+((r[1]-q[1])/4)]},getProperValue:function(r){var q=this.groupClone(r);q[0]=Math.max(q[0],0);q[1]=Math.max(q[1],0);q[0]=Math.min(q[0],1);q[1]=Math.min(q[1],1);if((!this.dragging&&!this.tapping)||this.options.snap){if(this.options.steps>1){q=this.getClosestSteps(q)}}
return q},getRatiosByOffsets:function(q){return[this.getRatioByOffset(q[0],this.bounds.availWidth,this.bounds.left),this.getRatioByOffset(q[1],this.bounds.availHeight,this.bounds.top)]},getRatioByOffset:function(s,q,r){return q?(s-r)/q:0},getOffsetsByRatios:function(q){return[this.getOffsetByRatio(q[0],this.bounds.availWidth,this.bounds.left),this.getOffsetByRatio(q[1],this.bounds.availHeight,this.bounds.top)]},getOffsetByRatio:function(r,q,s){return Math.round(r*q)+s},getStepNumber:function(q){return this.getClosestStep(q)*(this.options.steps-1)+1},getClosestSteps:function(q){return[this.getClosestStep(q[0]),this.getClosestStep(q[1])]},getClosestStep:function(t){var q=0;var s=1;for(var r=0;r<=this.options.steps-1;r++){if(Math.abs(this.stepRatios[r]-t)<s){s=Math.abs(this.stepRatios[r]-t);q=r}}
return this.stepRatios[q]},groupCompare:function(r,q){return r[0]==q[0]&&r[1]==q[1]},groupCopy:function(r,q){r[0]=q[0];r[1]=q[1]},groupClone:function(q){return[q[0],q[1]]},draggingOnDisabledAxis:function(){return(!this.options.horizontal&&o.xDiff>o.yDiff)||(!this.options.vertical&&o.yDiff>o.xDiff)}};var i=function(r,q){return function(){return r.apply(q,arguments)}};var e=function(q,r,s){if(q.addEventListener){q.addEventListener(r,s,!1)}else{if(q.attachEvent){q.attachEvent("on"+r,s)}}};var b=function(q,r,s){if(q.removeEventListener){q.removeEventListener(r,s,!1)}else{if(q.detachEvent){q.detachEvent("on"+r,s)}}};var f=function(q){if(!q){q=window.event}
if(q.preventDefault){q.preventDefault()}
q.returnValue=!1};var a=function(q){if(!q){q=window.event}
if(q.stopPropagation){q.stopPropagation()}
q.cancelBubble=!0};var o={x:0,y:0,xDiff:0,yDiff:0,refresh:function(q){if(!q){q=window.event}
if(q.type=="mousemove"){this.set(q)}else{if(q.touches){this.set(q.touches[0])}}},set:function(s){var r=this.x,q=this.y;if(s.clientX||s.clientY){this.x=s.clientX;this.y=s.clientY}else{if(s.pageX||s.pageY){this.x=s.pageX-document.body.scrollLeft-document.documentElement.scrollLeft;this.y=s.pageY-document.body.scrollTop-document.documentElement.scrollTop}}
this.xDiff=Math.abs(this.x-r);this.yDiff=Math.abs(this.y-q)}};var c={get:function(r){var q={left:0,top:0};if(r.getBoundingClientRect!==undefined){q=r.getBoundingClientRect()}
return[q.left,q.top]}};var d={transform:l("transform"),perspective:l("perspective"),backfaceVisibility:l("backfaceVisibility")};function l(t){var s="Webkit Moz ms O".split(" "),r=document.documentElement.style;if(r[t]!==undefined){return t}
t=t.charAt(0).toUpperCase()+t.substr(1);for(var q=0;q<s.length;q++){if(r[s[q]+t]!==undefined){return s[q]+t}}}
function p(q){if(d.backfaceVisibility&&d.perspective){q.style[d.perspective]="1000px";q.style[d.backfaceVisibility]="hidden"}}
var m=["webkit","moz"];var h=window.requestAnimationFrame;var g=window.cancelAnimationFrame;for(var k=0;k<m.length&&!h;++k){h=window[m[k]+"RequestAnimationFrame"];g=window[m[k]+"CancelAnimationFrame"]||window[m[k]+"CancelRequestAnimationFrame"]}
if(!h){h=function(q){return setTimeout(q,25)};g=clearTimeout}
return j}));var EventListenerClass={};EventListenerClass=function(){this.listeners={}};EventListenerClass.prototype={addEventListener:function(d,f,c){var a=[];var e=arguments.length;for(var b=0;b<e;b++){a.push(arguments[b])}
a=a.length>3?a.splice(3,a.length-1):[];if(typeof this.listeners[d]!="undefined"){this.listeners[d].push({scope:c,callback:f,args:a})}else{this.listeners[d]=[{scope:c,callback:f,args:a}]}},destroyEventListener:function(){this.listeners={}},removeEventListener:function(d,g,c){if(typeof this.listeners[d]!="undefined"){var f=this.listeners[d].length;var a=[];for(var b=0;b<f;b++){var e=this.listeners[d][b];if(e.scope==c&&e.callback==g){}else{a.push(e)}}
this.listeners[d]=a}},hasEventListener:function(c,f,b){if(typeof this.listeners[c]!="undefined"){var e=this.listeners[c].length;if(f===undefined&&b===undefined){return e>0}
for(var a=0;a<e;a++){var d=this.listeners[c][a];if((b?d.scope==b:!0)&&d.callback==f){return!0}}}
return!1},dispatch:function(k,g){var h=0;var b={type:k,target:g};var j=[];var a=arguments.length;for(var e=0;e<a;e++){j.push(arguments[e])}
j=j.length>2?j.splice(2,j.length-1):[];j=[b].concat(j);if(typeof this.listeners[k]!="undefined"){var f=this.listeners[k].length;for(var e=0;e<f;e++){var c=this.listeners[k][e];if(c&&c.callback){var d=j.concat(c.args);c.callback.apply(c.scope,d);h+=1}}}},getEvents:function(){var e="";for(var b in this.listeners){var d=this.listeners[b].length;for(var a=0;a<d;a++){var c=this.listeners[b][a];e+=c.scope&&c.scope.className?c.scope.className:"anonymous";e+=" listen for '"+b+"'\n"}}
return e}};var EventListener=new EventListenerClass();(function(){var k=!1;var m=this;var d=function(v){if(v instanceof d){return v}
if(!(this instanceof d)){return new d(v)}
this.EXIFwrapped=v};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=d}
exports.EXIF=d}else{m.EXIF=d}
var r=d.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"};var u=d.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"};var j=d.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"};var h=d.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function o(v,x,w){if(v.addEventListener){v.addEventListener(x,w,!1)}else{if(v.attachEvent){v.attachEvent("on"+x,w)}}}
function g(v){return!!(v.exifdata)}
function c(y,B){B=B||y.match(/^data\:([^\;]+)\;base64,/mi)[1]||"";y=y.replace(/^data\:([^\;]+)\;base64,/gmi,"");var A=atob(y);var v=A.length;var x=new ArrayBuffer(v);var w=new Uint8Array(x);for(var z=0;z<v;z++){w[z]=A.charCodeAt(z)}
return x}
function s(w,x){var v=new XMLHttpRequest();v.open("GET",w,!0);v.responseType="blob";v.onload=function(y){if(this.status==200||this.status===0){x(this.response)}};v.send()}
function b(w,A){function y(D){var C=f(D);var B=e(D);w.exifdata=C||{};w.iptcdata=B||{};if(A){A.call(w)}}
if(w.src){if(/^data\:/i.test(w.src)){var z=c(w.src);y(z)}else{if(/^blob\:/i.test(w.src)){var v=new FileReader();v.onload=function(B){y(B.target.result)};s(w.src,function(B){v.readAsArrayBuffer(B)})}else{var x=new XMLHttpRequest();x.onload=function(){if(this.status==200||this.status===0){y(x.response)}else{throw "Could not load image"}
x=null};x.open("GET",w.src,!0);x.responseType="arraybuffer";x.send(null)}}}else{if(window.FileReader&&(w instanceof window.Blob||w instanceof window.File)){var v=new FileReader();v.onload=function(B){if(k){console.log("Got file of length "+B.target.result.byteLength)}
y(B.target.result)};v.readAsArrayBuffer(w)}}}
function f(w){var z=new DataView(w);if(k){console.log("Got file of length "+w.byteLength)}
if((z.getUint8(0)!=255)||(z.getUint8(1)!=216)){if(k){console.log("Not a valid JPEG")}
return!1}
var y=2,x=w.byteLength,v;while(y<x){if(z.getUint8(y)!=255){if(k){console.log("Not a valid marker at offset "+y+", found: "+z.getUint8(y))}
return!1}
v=z.getUint8(y+1);if(k){console.log(v)}
if(v==225){if(k){console.log("Found 0xFFE1 marker")}
return q(z,y+4,z.getUint16(y+2)-2)}else{y+=2+z.getUint16(y+2)}}}
function e(z){var C=new DataView(z);if(k){console.log("Got file of length "+z.byteLength)}
if((C.getUint8(0)!=255)||(C.getUint8(1)!=216)){if(k){console.log("Not a valid JPEG")}
return!1}
var B=2,A=z.byteLength;var w=function(E,D){return(E.getUint8(D)===56&&E.getUint8(D+1)===66&&E.getUint8(D+2)===73&&E.getUint8(D+3)===77&&E.getUint8(D+4)===4&&E.getUint8(D+5)===4)};while(B<A){if(w(C,B)){var y=C.getUint8(B+7);if(y%2!==0){y+=1}
if(y===0){y=4}
var v=B+8+y;var x=C.getUint16(B+6+y);return t(z,v,x);break}
B++}}
var a={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function t(z,C,B){var D=new DataView(z);var A={};var w,F,v,E,x;var y=C;while(y<C+B){if(D.getUint8(y)===28&&D.getUint8(y+1)===2){E=D.getUint8(y+2);if(E in a){v=D.getInt16(y+3);x=v+5;F=a[E];w=l(D,y+5,v);if(A.hasOwnProperty(F)){if(A[F]instanceof Array){A[F].push(w)}else{A[F]=[A[F],w]}}else{A[F]=w}}}
y++}
return A}
function p(v,B,D,A,x){var y=v.getUint16(D,!x),E={},z,C,w;for(w=0;w<y;w++){z=D+w*12+2;C=A[v.getUint16(z,!x)];if(!C&&k){console.log("Unknown tag: "+v.getUint16(z,!x))}
E[C]=i(v,z,B,D,x)}
return E}
function i(A,E,H,I,C){var D=A.getUint16(E+2,!C),G=A.getUint32(E+4,!C),w=A.getUint32(E+8,!C)+H,B,F,z,y,v,x;switch(D){case 1:case 7:if(G==1){return A.getUint8(E+8,!C)}else{B=G>4?w:(E+8);F=[];for(y=0;y<G;y++){F[y]=A.getUint8(B+y)}
return F}
case 2:B=G>4?w:(E+8);return l(A,B,G-1);case 3:if(G==1){return A.getUint16(E+8,!C)}else{B=G>2?w:(E+8);F=[];for(y=0;y<G;y++){F[y]=A.getUint16(B+2*y,!C)}
return F}
case 4:if(G==1){return A.getUint32(E+8,!C)}else{F=[];for(y=0;y<G;y++){F[y]=A.getUint32(w+4*y,!C)}
return F}
case 5:if(G==1){v=A.getUint32(w,!C);x=A.getUint32(w+4,!C);z=new Number(v/x);z.numerator=v;z.denominator=x;return z}else{F=[];for(y=0;y<G;y++){v=A.getUint32(w+8*y,!C);x=A.getUint32(w+4+8*y,!C);F[y]=new Number(v/x);F[y].numerator=v;F[y].denominator=x}
return F}
case 9:if(G==1){return A.getInt32(E+8,!C)}else{F=[];for(y=0;y<G;y++){F[y]=A.getInt32(w+4*y,!C)}
return F}
case 10:if(G==1){return A.getInt32(w,!C)/A.getInt32(w+4,!C)}else{F=[];for(y=0;y<G;y++){F[y]=A.getInt32(w+8*y,!C)/A.getInt32(w+4+8*y,!C)}
return F}}}
function l(w,y,x){var v="";for(n=y;n<y+x;n++){v+=String.fromCharCode(w.getUint8(n))}
return v}
function q(z,w){if(l(z,w,4)!="Exif"){if(k){console.log("Not valid EXIF data! "+l(z,w,4))}
return!1}
var A,C,D,y,x,B=w+6;if(z.getUint16(B)==18761){A=!1}else{if(z.getUint16(B)==19789){A=!0}else{if(k){console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)")}
return!1}}
if(z.getUint16(B+2,!A)!=42){if(k){console.log("Not valid TIFF data! (no 0x002A)")}
return!1}
var v=z.getUint32(B+4,!A);if(v<8){if(k){console.log("Not valid TIFF data! (First offset less than 8)",z.getUint32(B+4,!A))}
return!1}
C=p(z,B,B+v,u,A);if(C.ExifIFDPointer){y=p(z,B,B+C.ExifIFDPointer,r,A);for(D in y){switch(D){case "LightSource":case "Flash":case "MeteringMode":case "ExposureProgram":case "SensingMethod":case "SceneCaptureType":case "SceneType":case "CustomRendered":case "WhiteBalance":case "GainControl":case "Contrast":case "Saturation":case "Sharpness":case "SubjectDistanceRange":case "FileSource":y[D]=h[D][y[D]];break;case "ExifVersion":case "FlashpixVersion":y[D]=String.fromCharCode(y[D][0],y[D][1],y[D][2],y[D][3]);break;case "ComponentsConfiguration":y[D]=h.Components[y[D][0]]+h.Components[y[D][1]]+h.Components[y[D][2]]+h.Components[y[D][3]];break}
C[D]=y[D]}}
if(C.GPSInfoIFDPointer){x=p(z,B,B+C.GPSInfoIFDPointer,j,A);for(D in x){switch(D){case "GPSVersionID":x[D]=x[D][0]+"."+x[D][1]+"."+x[D][2]+"."+x[D][3];break}
C[D]=x[D]}}
return C}
d.getData=function(v,w){if((v instanceof Image||v instanceof HTMLImageElement)&&!v.complete){return!1}
if(!g(v)){b(v,w)}else{if(w){w.call(v)}}
return!0};d.getTag=function(w,v){if(!g(w)){return}
return w.exifdata[v]};d.getAllTags=function(w){if(!g(w)){return{}}
var v,y=w.exifdata,x={};for(v in y){if(y.hasOwnProperty(v)){x[v]=y[v]}}
return x};d.pretty=function(w){if(!g(w)){return""}
var v,y=w.exifdata,x="";for(v in y){if(y.hasOwnProperty(v)){if(typeof y[v]=="object"){if(y[v]instanceof Number){x+=v+" : "+y[v]+" ["+y[v].numerator+"/"+y[v].denominator+"]\r\n"}else{x+=v+" : ["+y[v].length+" values]\r\n"}}else{x+=v+" : "+y[v]+"\r\n"}}}
return x};d.readFromBinaryFile=function(v){return f(v)};if(typeof define==="function"&&define.amd){define("exif-js",[],function(){return d})}}.call(this));function fadeIn(a,b){a.style.opacity=0.1;a.style.display=b||"block";(function c(){var d=parseFloat(a.style.opacity);if(!((d+=0.1)>1)){a.style.opacity=d;requestAnimationFrame(c)}})()}
function fadeOut(a,b){a.style.opacity=1;a.style.display=b||"block";(function c(){var d=parseFloat(a.style.opacity);if(!((d-=0.1)==0)){a.style.opacity=d;console.log(d);requestAnimationFrame(c)}})()}
var ImageButton=function(b,a){ImageButton.prototype.makeButton=function(d,c){if(d==null||d==""){return}
if(d=="browse"){this.makeBrowseButton(c)}else{this.makeSimpleButton(d,c)}};ImageButton.prototype.makeBrowseButton=function(c){var d='<label style="display:block; overflow:hidden; cursor:pointer"><input type="file" class="file" /></label>'};ImageButton.prototype.makeSimpleButton=function(d,c){}};(function(a){a.jsDom={createNode:function(h,g,b,e,d,c){var f=document.createElement(h);jsDom.setAttr(f,g);if(b){jsDom.html(f,b)}
switch(e){case "parent":if(!c){jsDom.append(d,f)}else{jsDom.prepend(d,f)}
break;case "child":if(!c){jsDom.append(f,d)}else{jsDom.prepend(f,d)}
break;default:break}
return f},remove:function(b){var c=jsDom.getNode(b);if(c.firstChild){jsDom.clearNode(c)}
c.parentNode.removeChild(c)},clearNode:function(b){while(b.firstChild){b.removeChild(b.firstChild)}},setAttr:function(d,c){var f=jsDom.getNode(d);for(var b in c){if(c.hasOwnProperty(b)){f.setAttribute(b,c[b])}}},html:function(b,c){var d=jsDom.getNode(b);d.innerHTML=c},append:function(b,d){var e=jsDom.getNode(b);var f=jsDom.getNode(d);e.appendChild(f)},prepend:function(b,d){var e=jsDom.getNode(b);var f=jsDom.getNode(d);e.insertBefore(f,e.childNodes[0]||null)},li:function(c,d){var b=document.createElement("li");jsDom.setAttr(b,c);jsDom.html(b,d);return b},liImage:function(f,e,b){var c=jsDom.createNode(f,e);var d=jsDom.createNode("img",b,null,"parent",c);return c},button:function(e,h,b,g,c,i,f){var d=jsDom.createNode("button",h);if(g){var j=jsDom.createNode("img",{src:g},null,"parent",d)}else{jsDom.html(d,b)}
e.appendChild(d)},displayById:function(d,c){var b=jsDom.nodeById(d);if(c){jsDom.displayNode(b,c)}
return b},displayNode:function(c,b){c.style.display=b},show:function(b){jsDom.getNode(b).style.display="block"},hide:function(b){jsDom.getNode(b).style.display="none"},nodeById:function(d,b){var c=document.getElementById(d);if(b){this.html(c,b)}
return c},nodeByClass:function(b){return document.getElementsByClassName(b)},css:function(d,c){var f=jsDom.getNode(d);for(var b in c){if(c.hasOwnProperty(b)){f.style[b]=c[b]}}},getProperty:function(c,g,b){var d=jsDom.getNode(c);var f=d[g];if(b){return jsDom.makeInt(f)}
return f},getStyle:function(c,g,b){var d=jsDom.getNode(c);var f=d.style[g];if(b){return jsDom.makeInt(f)}
return f},removeStyle:function(b,d){var c=jsDom.getNode(b);c.style.removeProperty(d)},makeInt:function(b){return b==""?0:parseInt(b)},getNode:function(b){if(typeof b!="object"){return jsDom.nodeById(b)}
return b},setBGOpacity:function(b,d){var c=jsDom.getNode(b);c.style["-khtml-opacity"]=d/100;c.style["-moz-opacity"]=d/100;c.style["-ms-filter"]="alpha(opacity="+d+")";c.style.filter="alpha(opacity="+d+")";c.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity=("+d/100+"))";c.style.opacity=d/100}}})(this);var ModelGallery=function(o){var c=o;var d=settings_tryon;var h=this;var j=null;var b=null;var g=null;var f=null;var q=!1;var e=!1;var k=navigator.userAgent.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i);var l=0;ModelGallery.prototype.initPlugin=function(){EventListener.addEventListener("AREA_CLICKED",i)};ModelGallery.prototype.setupLayout=function(){q=!0;if(e){jsDom.css(j,{display:"block"});if(!k){jsDom.css(b,{display:"block"});jsDom.css(g,{display:"block"})}
return}
panelheight=(parseInt(d.panelheight)-(2*parseInt(d.panelborder)));if(!k){l=42;b=jsDom.createNode("div",{id:"leftArrow",style:"width:20px; color:#3d3d3d; height:"+panelheight+"px; cursor:pointer; font-size:20px; line-height:"+panelheight+"px; float:left;"},"","parent",c,!0);jsDom.html(b,"&#9654;")}
j=jsDom.createNode("div",{id:"modelArea",style:"overflow:hidden; float:left;","class":"dragdealer"},"","parent",c,!0);jsDom.css(j,{width:(d.panelwidth-l)+"px",height:panelheight+"px",background:d.panelcolor+""});if(!k){g=jsDom.createNode("div",{id:"rightArrow",style:"width:20px;color:#3d3d3d; height:"+panelheight+"px;cursor:pointer; font-size:20px; line-height:"+panelheight+"px; float:left;"},"","parent",c,!0);jsDom.html(g,"&#9664;")}
p()};function p(){f=jsDom.createNode("ul",{id:"modelVisual","class":"handle",style:"overflow:hidden;margin:0;padding:0;list-style: none;position:relative;left:0px;height: "+(panelheight)+"px;"},"","parent",j);var t=d.modelsimages.split(",");var r=0;var s=0;for(var u=0;u<t.length;u++){var v=t[u].toString().trim();var x=jsDom.createNode("li",{id:"modelThumb"+u,style:"width:auto;min-width:30px;height:"+panelheight+"px;cursor:pointer;background-size:25%; float:left;"},"","parent",f);var w=jsDom.createNode("img",{src:v,style:"width:auto;height:"+(panelheight-6)+"px;padding:1px; border:1px solid #d3d3d3;margin:1px;"},"","parent",x);w.onload=function(){s++;if(this.width<=50){r+=this.width+11}else{r+=(55+11)}
if(s>=t.length){m(r)}}}
f.addEventListener("click",a)}
function a(t){var s=t.target.nodeName;var r=t.target||t.srcElement;if(s=="IMG"){var v=jsDom.getProperty(r,"src");EventListener.dispatch("MODEL_CHOOSEN",this,v,"");var w=jsDom.nodeById("previewImage");EventListener.dispatch("APPLY_FRAME",this,currentFrame);i()}
var u=jsDom.nodeById("PointerSetting");if(u!=null){jsDom.hide("PointerSetting")}}
function m(r){jsDom.css(f,{width:r+"px"});e=!0;var t=1;var s=d.modelsimages.split(",");var u=new Dragdealer("modelArea",{steps:s.length,speed:0.3,loose:!0,requestAnimationFrame:!0});if(!k){b.addEventListener("click",function(){if(t>s.length){t=s.length;return}else{t++}
u.setStep(t)});g.addEventListener("click",function(){if(t<=1){t=0;return}else{t--}
u.setStep(t)})}}
function i(r){if(q){jsDom.css(j,{display:"none"});if(!k){jsDom.css(b,{display:"none"});jsDom.css(g,{display:"none"})}
EventListener.dispatch("GALLERY_CLOSED",this);q=!1}}
this.initPlugin()};var Resizer=function(s){var d=s;var w=settings_tryon;var r=this;var l=null;var v=100;var f=0;var t="";var k=0;var j=["FrameReset","FrameRotateLeft","FrameRotateRight","FrameScaleUp","FrameScaleDown","space","FacebookShare","TwitterShare","SaveImage","space","PointerSetting"];var g=new ShareView(d);var i=0;var p=0;if(w.shareURL==""&&w.saveFileUrl==""){j=j.slice(0,6)}else{if(w.shareURL==""){j=j.slice(0,6);j.push("SaveImage")}else{if(w.saveFileUrl==""){j.pop()}}}
Resizer.prototype.initPlugin=function(){c();EventListener.addEventListener("ALL_DONE",m);EventListener.addEventListener("INIT_RESIZER",u);EventListener.addEventListener("HIDE_RESIZER",q);EventListener.addEventListener("OLD_RESIZER",b);EventListener.addEventListener("INIT_RESIZER_VAR",e)};function c(){l=jsDom.createNode("div",{id:"frame_live_resizer",style:"position:absolute; display:none;width:"+w.resizerPanelWidth+"px;height:"+w.resizerPanelHeight+"px;"},"","parent",d);jsDom.css(l,{display:"block",top:"0px",left:w.width+"px","z-index":"11",textAlign:"center"});for(var x=0;x<j.length;x++){if(j[x]=="space"){jsDom.createNode("hr",{id:"space"+x,width:"60%",style:"border:0;height:1px;margin:8px 8px 8px;background-color:"+w.bordercolor+";"},"","parent",l);continue}
a(j[x])}}
function a(B){var A=B+"Title";var y=jsDom.createNode("span",{"class":"hint--right hint--rounded","data-hint":w[A]},"","parent",l);var x=jsDom.createNode("img",{src:""+w[B]+"",id:B,"class":"resizerpanel"},"","parent",y);jsDom.css(x,{display:"inline-block","margin-bottom":"0px",cursor:"pointer"});x.addEventListener("click",o);var z=jsDom.nodeById("PointerSetting");if(z!=null){jsDom.hide("PointerSetting")}}
function u(I,x,y,F){v=100;f=0;i=y;p=F;var J=window.getComputedStyle(x,null);var D=J.getPropertyValue("-webkit-transform")||J.getPropertyValue("-moz-transform")||J.getPropertyValue("-ms-transform")||J.getPropertyValue("-o-transform")||J.getPropertyValue("transform")||"none";if(D!="none"){var H=D.split("(")[1].split(")")[0].split(",");var G=H[0];var E=H[1];var C=H[2];var A=H[3];var z=Math.sqrt(G*G+E*E);v=z*100;var B=E/z;f=Math.round(Math.atan2(E,G)*(180/Math.PI))}}
function e(){v=100;f=0}
function b(x,z,y){z=z;y=y;EventListener.dispatch("FRAME_WITH_RESIZER",this,v,f,z,y)}
function o(){var x=this.id;switch(x){case "FrameReset":EventListener.dispatch("FRAME_RESET",this);break;case "FrameRotateLeft":f-=5;EventListener.dispatch("FRAME_ROTATE_LEFT",this,v,f,i,p);break;case "FrameRotateRight":f+=5;EventListener.dispatch("FRAME_ROTATE_RIGHT",this,v,f,i,p);break;case "FrameScaleUp":v+=10;EventListener.dispatch("SCALE_UP",this,v,f,i,p);break;case "FrameScaleDown":v-=10;EventListener.dispatch("SCALE_DOWN",this,v,f,i,p);break;case "FacebookShare":g.savetheImage("fb");break;case "TwitterShare":g.savetheImage("tw");break;case "SaveImage":g.savetheImage("saveonly");break;case "PointerSetting":EventListener.dispatch("ADJUSTMENT_STARTED",this);break}}
function m(){jsDom.css(l,{display:"block"});var y=jsDom.nodeById("frames");var x=jsDom.nodeById("userThumb");if(x){jsDom.css(x,{display:"block"})}
if(y){jsDom.css(y,{display:"block"})}}
function q(){jsDom.css(l,{display:"none"});var y=jsDom.nodeById("frames");var x=jsDom.nodeById("userThumb");if(x){jsDom.css(x,{display:"none"})}
if(y){jsDom.css(y,{display:"none"})}}
function h(z){var y=0;var x=0;while(z&&!isNaN(z.offsetLeft)&&!isNaN(z.offsetTop)){y+=z.offsetLeft-z.scrollLeft;x+=z.offsetTop-z.scrollTop;z=z.offsetParent}
return{top:x,left:y}}
this.initPlugin()};var SaveImage=function(){var a=jsDom.nodeById("mainArea");SaveImage.prototype.setupLayout=function(){};SaveImage.prototype.initSaving=function(){html2canvas([a],{onrendered:function(e){var f=e.toDataURL("image/png");var d=c(f);b(d,"mytryonlook.png")}})};function c(d){var h=atob(d.split(",")[1]);var g=new ArrayBuffer(h.length);var e=new Uint8Array(g);for(var f=0;f<h.length;f++){e[f]=h.charCodeAt(f)}
return new Blob([g],{type:"image/png"})}
function b(e,f){var d=new FileReader();d.readAsDataURL(e);d.onload=function(h){var g=document.createElement("a");g.setAttribute("download","MyTryOnLook.png");g.href=h.target.result;g.innerHTML="testing";g.style.display="none";document.body.appendChild(g);g.click()}}};var SaveView=function(d){var a=d;var b=settings_tryon;var c=this;SaveView.prototype.initPlugin=function(){EventListener.addEventListener("SAVE_PREVIEW",this.savetheImage)};SaveView.prototype.savetheImage=function(e){};this.initPlugin()};var ShareView=function(f){var e=f;var h=settings_tryon;var j="";var a="";var m=window.location.href;var d=m.substring(m.lastIndexOf("/")+8);ShareView.prototype.initPlugin=function(){EventListener.addEventListener("SHARE_PREVIEW_SCREEN",c)};function c(o){}
ShareView.prototype.savetheImage=function(r){a=jsDom.nodeById("mainArea");j=jsDom.createNode("img",{id:"preloader",src:settings_tryon.preloader},"","parent",e,!0);jsDom.css(j,{position:"absolute",display:"block",opacity:"1",left:"45%",top:"45%"});jsDom.css(a,{opacity:"0.5"});var p="";var u=jsDom.nodeById("mainArea");var v=jsDom.nodeById("canvasImage");var s=v.width;var q=v.height;var o=document.createElement("canvas");o.width=s;o.height=q;var t=v.naturalHeight/v.height;var w=o.getContext("2d");i(v,function(y,x){w.save();w.translate(v.width/2,v.height/2);w.rotate(x*Math.PI/180);w.scale(y,y);w.drawImage(v,-v.width/2,-v.height/2,v.width,v.height);g(v,w,o);p=o.toDataURL("image/png")});frame=jsDom.nodeById("frame");if(frame){i(frame,function(B,A){var z=parseFloat(frame.style.left)+frame.width/2-parseFloat(v.style.left);var C=parseFloat(frame.style.top)+frame.height/2-parseFloat(v.style.top);w.restore();w.translate(z,C);w.rotate(A*Math.PI/180);w.scale(B,B);w.globalAlpha=0.85;w.drawImage(frame,-1*frame.width/2,-1*frame.height/2,frame.width,frame.height);p=o.toDataURL("image/png");b(r,p)})}else{b(r,p)}};function b(p,q){try{var o;if(window.XMLHttpRequest){o=new XMLHttpRequest()}else{o=new ActiveXObject("Microsoft.XMLHTTP")}
o.onreadystatechange=function(){if(o.readyState==4){if(o.status==200){jsDom.remove(j);jsDom.css(a,{opacity:"1"});Confirm.render("Image saved to server, would you like to save/share ?",p,o.responseText)}else{if(o.status==400){if(d==="true"){console.log("There was an error 400")}}else{alert("Oops something went wrong!");jsDom.remove(j);jsDom.css(a,{opacity:"1"});if(d==="true"){console.log("something else other than 200 was returned")}}}}};o.open("POST",h.saveFileUrl,!0);o.setRequestHeader("Content-type","application/x-www-form-urlencoded");o.setRequestHeader("Content-Disposition","attachment");o.send("img="+q)}catch(r){if(d==="true"){console.log(r)}}}
function i(p,s){var r=1;var o=0;var B=window.getComputedStyle(p,null);var x=B.getPropertyValue("-webkit-transform")||B.getPropertyValue("-moz-transform")||B.getPropertyValue("-ms-transform")||B.getPropertyValue("-o-transform")||B.getPropertyValue("transform")||"FAIL";if(x!="none"){var A=x.split("(")[1].split(")")[0].split(",");var z=A[0];var y=A[1];var w=A[2];var u=A[3];r=Math.sqrt(z*z+y*y);var t=r*100;var v=y/r;var q=Math.round(Math.atan2(y,z)*(180/Math.PI));o=q}
s(r,o)}
function g(p,q,r){var z=window.getComputedStyle(p,null);var w=z.getPropertyValue("-webkit-filter")||z.getPropertyValue("filter");if(w!="none"){var o=q.getImageData(0,0,r.width,r.height);var s=o.data,y=50;for(var u=0,x=s.length;u<x;u+=4){s[u]+=y;s[u+1]+=y;s[u+2]+=y}
var t=65;var v=(259*(t+255))/(255*(259-t));for(var u=0;u<s.length;u+=4){s[u]=v*(s[u]-128)+128;s[u+1]=v*(s[u+1]-128)+128;s[u+2]=v*(s[u+2]-128)+128}
q.putImageData(o,0,0)}}
function l(o){var q=encodeURIComponent(h.shareURL+"?title="+h.shareTitle+"& desc="+h.shareDescription+" & image="+o);var p="http://www.facebook.com/sharer/sharer.php?u="+q;window.open(p,"_blank")}
function k(o){var q=encodeURIComponent(h.shareURL+"?title="+h.shareTitle+"& desc="+h.shareDescription+" & image="+o);var p="https://twitter.com/intent/tweet?text="+h.shareTitle+"&url="+h.weburl+"/vtoplus.html&hashtags="+h.twitterHashtag;window.open(p,"_blank")}
this.initPlugin()};var BTN=(function(){var f=function(j){var g=new Array(Math.ceil(j.length/4));for(var h=0;h<g.length;h++){g[h]=j[h*4]+(j[h*4+1]<<8)+(j[h*4+2]<<16)+(j[h*4+3]<<24)}
return g};var e=function(j){var g=[];for(var h=0;h<j.length;h++){g.push(j[h]&255,j[h]>>>8&255,j[h]>>>16&255,j[h]>>>24&255)}
return g};var c=function(k){var g="";var j=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];for(var h=0;h<k.length;h++){g+=j[k[h]>>4]+j[k[h]&15]}
return g};var b=function(j){var g=[];for(var h=(j.substr(0,2)=="0x")?2:0;h<j.length;h+=2){g.push(parseInt(j.substr(h,2),16))}
return g};var d=function(j){var g="";for(var h=0;h<j.length;h++){g+=String.fromCharCode(j[h])}
return g};var a=function(j){var g=[];for(var h=0;h<j.length;h++){g.push(j.charCodeAt(h))}
return g};return{on:function(g,w){var x=f(a(g));var l=f(a(w));var j=x.length;var i;if(j==0){return""}
if(j==1){x[j++]=0}
var r=x[j-1],s=x[0],u=2654435769;var t,o,h=Math.floor(6+52/j),m=0;while(h-->0){m+=u;o=m>>>2&3;for(i=0;i<j-1;i++){s=x[i+1];t=(r>>>5^s<<2)+(s>>>3^r<<4)^(m^s)+(l[i&3^o]^r);r=x[i]+=t}
s=x[0];t=(r>>>5^s<<2)+(s>>>3^r<<4)^(m^s)+(l[i&3^o]^r);r=x[j-1]+=t}
return c(e(x))},off:function(g,w){var x=f(b(g));var l=f(a(w));var j=x.length;var i;if(j==0){return""}
var r=x[j-1],s=x[0],u=2654435769;var t,o,h=Math.floor(6+52/j);var m=h*u;while(m!=0){o=m>>>2&3;for(i=j-1;i>0;i--){r=x[i-1];t=(r>>>5^s<<2)+(s>>>3^r<<4)^(m^s)+(l[i&3^o]^r);s=x[i]-=t}
r=x[j-1];t=(r>>>5^s<<2)+(s>>>3^r<<4)^(m^s)+(l[i&3^o]^r);s=x[0]-=t;m-=u}
return d(e(x))}}})();var Tools=(function(){var a=function(d,g){var e=document.createElement("canvas");e.width=d.width;e.height=d.height;var c=e.getContext("2d");c.imageSmoothingEnabled=!0;c.mozImageSmoothingEnabled=!0;c.oImageSmoothingEnabled=!0;c.webkitImageSmoothingEnabled=!0;c.drawImage(d,0,0,d.width,d.height);var f=document.createElement("canvas");f.width=d.width*g;f.height=d.height*g;var b=f.getContext("2d");c.globalAlpha=0.5;b.imageSmoothingEnabled=!0;b.mozImageSmoothingEnabled=!0;b.oImageSmoothingEnabled=!0;b.webkitImageSmoothingEnabled=!0;b.drawImage(e,0,0,d.width*g,d.height*g);c.globalCompositeOperation="overlay";c.drawImage(f,0,0,d.width,d.height);return e.toDataURL("image/png")};return{reduceImage:function(b,c){return a(b,c)}}})();var Tryon=function(){var d=settings_tryon;var a=null;var b=null;var g=null;var e=null;var f=null;Tryon.prototype.initApp=function(j,i){c(j,i);var h=new Alternater(j)};function c(k,j){f=k;var h=0;jsDom.css(k,{position:"relative"});if(d.debug=="true"){jsDom.css(k,{border:"1px dashed #f00"})}
a=new TryonPreview(k,h);b=new Adjustment(j,h);if(d.isPanel===!0){g=new Resizer(k,h)}
bars=j;e=new TryonBar(bars);var l='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"><defs><filter id="contrast"><feGaussianBlur stdDeviation="1.5"/><feComponentTransfer><feFuncR type="discrete" tableValues="0 .5 1 1"/><feFuncG type="discrete" tableValues="0 .5 1"/><feFuncB type="discrete" tableValues="0"/></feComponentTransfer></filter><filter id="brightness"><feComponentTransfer><feFuncR type="linear" slope="4"/><feFuncG type="linear" slope="4"/><feFuncB type="linear" slope="4"/></feComponentTransfer></filter></defs> </svg>';var i=jsDom.createNode("div",{id:"tryon_filters"},l,"parent",document.body)}
Tryon.prototype.destroyByID=function(i){var h=document.getElementById(i);h.innerHTML=""};Tryon.prototype.destroyAll=function(){var l=jsDom.nodeByClass("softsol-tryon");for(var j=l.length-1;j>=0;j--){l[j].innerHTML=""}
var h=jsDom.nodeByClass("softsol-tryon-bar");for(var j=h.length-1;j>=0;j--){h[j].innerHTML=""}
var m=jsDom.nodeByClass("adjustment");if(m){for(var j=m.length-1;j>=0;j--){jsDom.remove(m[j])}
a=null;b=null;g=null;e=null;f=null;EventListener.destroyEventListener()}
var k=jsDom.nodeById("tryon_filters");jsDom.remove(k)}};function flashNotify(a){switch(a){case "error":EventListener.dispatch("noCamFound",this);break;case "webcamLoadComplete":break;case "webcamLive":EventListener.dispatch("WEBCAM_READY",this);break;case "webcamDenied":EventListener.dispatch("FLASH_CAM_DENIED",this);EventListener.dispatch("cameraPermissionDenied",this);break}}
function getBitmap(b,a){EventListener.dispatch("FILE_LOAD_COMPLETE",this,b,a);EventListener.dispatch("ADJUSTMENT_STARTED",this)}
function LoadingStart(){EventListener.dispatch("FILE_LOADING_INIT",this)}
function IOError(){alert("error in loading")}
String.prototype.toDOM=function(){var g=document,f,e=g.createElement("div"),c=g.createDocumentFragment();e.innerHTML=this;while(f=e.firstChild){c.appendChild(f)}
return c};var TryonBar=function(t){var D=t;var K=settings_tryon;var j=0;var B=[];var e=[];var C=this;var d=null;var l=null;var s=null;var c=null;var o=null;var q=!1;var b="";var E=navigator.userAgent.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i);TryonBar.prototype.setupLayout=function(){B=[];if(K.isPanel===!0){jsDom.css(D,{"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"});jsDom.css(D,{width:(parseInt(K.panelwidth)-(2*parseInt(K.panelborder)))+"px",height:(parseInt(K.panelheight)-(2*parseInt(K.panelborder)))+"px",background:K.panelcolor+""})}else{K.panelwidth=K.width;jsDom.css(D,{"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"});jsDom.css(D,{width:(parseInt(K.panelwidth))+"px",height:(parseInt(K.panelheight)-(2*parseInt(K.panelborder)))+"px",background:K.panelcolor+""})}
jsDom.css(D,{position:"relative"});jsDom.setBGOpacity(D,parseInt(K.panelalpha));if(K.panellocation=="inside"){jsDom.css(D,{bottom:K.panelheight+"px"})}
d=new ModelGallery(D);a(E);EventListener.addEventListener("RESET_VIEW_DEFAULT",r);EventListener.addEventListener("WEBCAM_READY",g);EventListener.addEventListener("ADJUSTMENT_STARTED",v);EventListener.addEventListener("WEBCAM_CLOSED",k);EventListener.addEventListener("GALLERY_CLOSED",A);EventListener.addEventListener("SWAP_CAMERA",I);EventListener.addEventListener("SWAP_CAMBAR",F)};function g(){q=!0}
function k(){q=!1}
function a(N){o=jsDom.createNode("div",{id:"mainPanelArea"},"","parent",D,!0);jsDom.css(o,{position:"absolute",left:"-9px"});var Q=K.buttons.split(",");var M=K.buttonstooltip.split(",");Q.reverse();M.reverse();if(N){Q.splice(1,1)}
j=Q.length;for(var P=Q.length-1;P>=0;P--){var L=Q[P].split("*");var O=M[P].split("*");B.push(L[0]);if(L[0]=="browse"){f(L[1],O[1],z)}else{if(K.isShowTitleWithIcon){u(L[0],L[1],O[1],z,!0)}else{J(L[0],L[1],P,z)}}}}
function u(M,R,Q,S){var N="";var P=M;var O=R;var L=new Image();L.onload=function(){labelHeight=parseInt(K.fontSize);this.width+=labelHeight;this.height+=labelHeight;var U=((parseInt(K.panelwidth)+(parseInt(K.panelborder)*2))/j)/2;var T=(parseInt(K.panelheight)-this.height)/2;N='<label id="tryon'+P+'" style="display:block;line-height:1;font-size:'+K.fontSize+"px; float:left; margin-top:"+T+"px; margin-left:"+U+"px; overflow:hidden; cursor:pointer; width:"+this.width+"px;height:"+this.height+"px;background-image:url("+O+');background-position:center top;z-index:9999;background-repeat:no-repeat;"><p class="tool" style="position:relative;color:'+K.fontcolor+';font-size: 9px;font-family: sans-serif;top:25px;margin: 0;padding: 0;width: 31px;text-align: center;">'+Q+"</p></label>";if(S){S(N,P)}};L.src=O}
function z(P,L){var N=P.toDOM();e[L]=N;var O=Object.keys(e).length;if(O>=j){for(var M=0;M<B.length;M++){jsDom.append(o,e[B[M]]);G(B[M],C)}}}
function f(O,N,P){var M="";var L=new Image();L.onload=function(){var R=((parseInt(K.panelwidth)+(parseInt(K.panelborder)*2))/j)/2;var S=0;if(K.isShowTitleWithIcon){S=parseInt(K.fontSize);this.width+=S;this.height+=S}
var Q=(parseInt(K.panelheight)-this.height)/2;if(window.File&&window.FileReader&&window.FileList&&window.Blob){M='<label style="display:block; float:left;line-height:1; font-size:'+K.fontSize+"px; margin-top:"+Q+"px; margin-left:"+R+"px; overflow:hidden; cursor:pointer; width:"+this.width+"px;height:"+this.height+"px;background-image:url("+O+');background-position:center top; background-repeat:no-repeat;"><input type="file" id="tryonbrowse" size="2" style="position:relative;margin:0; cursor:pointer; height:'+(this.height-S)+"px;width: "+this.width+'px;opacity: 0;-moz-opacity: 0;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0);" accept="image/*" /><p  class="tool" style="color:'+K.fontcolor+';cursor:pointer;position:relative;font-size: 9px;font-family:sans-serif;margin: 0;padding: 0;width: 31px;text-align: center;">'+N+"</p></label>"}else{M='<label style="display:block; float:left;line-height:1; margin-top:'+Q+"px; margin-left:"+R+"px; overflow:hidden; cursor:pointer; width:"+this.width+"px;height:"+this.height+"px;background-image:url("+O+');background-position:center top; background-repeat:no-repeat;"><object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+this.width+'" height="'+this.height+'" id="browsebtn"><param name="loop" value="false"/><param name="movie" value="'+K.swfpath+'" /><param name="wmode" value="transparent" /><param name="loop" value="false"/><!--[if !IE]>--><object type="application/x-shockwave-flash" data="'+K.swfpath+'" width="'+this.width+'" height="'+this.height+'" class="" align=""><param name="wmode" value="transparent" /><param name="loop" value="false"/><param name="flashvars" value="" /><!--<![endif]--><!--[if !IE]>--></object><!--<![endif]-->'+N+"</label>"}
if(P){P(M,"browse")}};L.src=O}
function J(N,Q,L,R,P){var O="";var M=new Image();M.onload=function(){if(N=="ok_button"){var T=((parseInt(K.panelwidth)+(parseInt(K.panelborder)*2))/j)/2-(this.width)/2}else{var T=((parseInt(K.panelwidth)+(parseInt(K.panelborder)*2))/j)/2-(this.width)/2}
var S=(parseInt(K.panelheight)-this.height)/2;if(P){O='<label id="tryon'+N+'" style="display:block;line-height:1; float:left; margin-top:'+S+"px; margin-left:"+T+"px; overflow:hidden; cursor:pointer; width:"+this.width+"px;height:"+this.height+"px;background-image:url("+Q+');"></label>'}else{O='<label id="tryon'+N+'" style="display:block;line-height:1; float:left; margin-top:'+S+"px; margin-left:"+T+"px; overflow:hidden; cursor:pointer; width:"+this.width+"px;height:"+this.height+"px;background-image:url("+Q+');"></label>'}
if(R){R(O,N)}};M.src=Q}
function G(M){var L=jsDom.nodeById("tryon"+M);if(M=="browse"){if(window.FileReader&&window.FileList&&window.Blob){L.addEventListener("change",function(N){H(N)})}}else{L.addEventListener("click",function(N){H(N)});if(!E){L.addEventListener("touchstart",function(N){H(N)})}}}
function H(L){var M=L.target.id.split("tryon").join("");switch(M){case "browse":EventListener.dispatch("FILE_LOAD_COMPLETE",this,L.target.files,"");break;case "modelgallery":jsDom.css(o,{display:"none"});d.setupLayout();break;case "webcam":EventListener.dispatch("WEBCAM_OPEN",this);break;case "take_pic":if(q){EventListener.dispatch("WEBCAM_TAKE_PICTURE",this);x()}else{EventListener.dispatch("requestAllowCamera",this)}
break;case "close_cam":if(q){EventListener.dispatch("WEBCAM_CLOSE",this);I()}else{EventListener.dispatch("requestAllowCamera",this)}
break;case "use_pic":EventListener.dispatch("ADJUSTMENT_STARTED",this);break;case "retake":EventListener.dispatch("WEBCAM_RETAKE",this);F();break;case "ok_button":EventListener.dispatch("ALL_DONE",this);I();break}}
function i(){return this.id}
function F(){jsDom.css(o,{display:"none"});var L=(parseInt(K.panelheight)-(2*parseInt(K.panelborder)));l=jsDom.createNode("div",{id:"webcambarArea",style:"overflow:hidden;"},"","parent",D,!0);jsDom.css(l,{width:(parseInt(K.panelwidth)-(2*parseInt(K.panelborder)))+"px",height:(parseInt(K.panelheight)-(2*parseInt(K.panelborder)))+"px",background:K.panelcolor+""});m()}
function v(){var L=jsDom.nodeById("imglink");if(L!=null){jsDom.show("imglink")}
jsDom.css(o,{display:"none"});var M=(parseInt(K.panelheight)-(2*parseInt(K.panelborder)));s=jsDom.createNode("div",{id:"adjustArea",style:"overflow:hidden;"},"","parent",D,!0);jsDom.css(s,{width:K.panelwidth+"px",background:K.panelcolor+""});j=1;J("ok_button",K.okbutton,"",y)}
function I(){jsDom.css(o,{display:"block"});var L=jsDom.nodeById("frame_live_resizer");if(L!=null){jsDom.css(L,{"pointer-events":"auto",opacity:"1"})}
l=jsDom.nodeById("webcambarArea");if(l!==null){jsDom.remove(l);l=null}
if(s!==null){jsDom.remove(s);s=null}
if(c!==null){jsDom.remove(c);c=null}}
function x(){jsDom.remove(l);var L=(parseInt(K.panelheight)-(2*parseInt(K.panelborder)));c=jsDom.createNode("div",{id:"confirmationArea",style:"overflow:hidden;"},"","parent",D,!0);jsDom.css(c,{width:(parseInt(K.panelwidth)-(2*parseInt(K.panelborder)))+"px",height:(parseInt(K.panelheight)-(2*parseInt(K.panelborder)))+"px",background:K.panelcolor+""});h()}
function m(){j=2;var L=K.takepicicon;var M=K.closebutton;if(K.isShowTitleWithIcon){u("take_pic",L,K.takepicicontooltip,function(N,O){w(N,O);u("close_cam",M,K.closebuttontooltip,w)})}else{J("take_pic",L,"",function(N,O){w(N,O);J("close_cam",M,"",w)})}}
function w(N,L){if(c!==null){jsDom.remove(c);c=null}
var M=N.toDOM();jsDom.append(l,M);G(L)}
function r(L){I()}
function h(L){var M=K.usepictureicon;var N=K.closebutton;if(K.isShowTitleWithIcon){u("use_pic",M,K.usepicturetooltip,function(P,O){p(P,O);u("retake",N,K.discardpicturetooltip,p)})}else{J("use_pic",M,"",function(P,O){p(P,O);J("retake",N,"",p)})}}
function p(N,L){var M=N.toDOM();if(L=="use_pic"){jsDom.prepend(c,M)}else{jsDom.append(c,M)}
G(L)}
function y(N,L){var M=N.toDOM();jsDom.append(s,M);G(L);if(c!==null){jsDom.remove(c);c=null}
if(L=="ok_button"){EventListener.dispatch("CHECK_FOR_MOBILE",this)}}
function A(){I()}
this.setupLayout()};var TryonPreview=function(aS){var av=aS;var aI=settings_tryon;var t=this;var T=null;var s=null;var ao=null;var aL=new CacheImage();var aG=null;var ad=null;var N=null;var aA=null;var w=100;var aC=0;var M=100;var A=0;var an=null;var L=null;var R=null;var aJ=null;var E=!1;var Z=!1;var d="";var v="";var ar=!1;var au=null;var g=!1;var X=null;var o=0;var Y=null;var aH="";var aj=" ";var aw=!0;var k=null;var ap=!1;var b=null;var ax={};var ag=null;var aF=navigator.userAgent.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i);var p=0;var al=0;var at=settings_tryon.detectMsg;var ac=settings_tryon.UndetectMsg;var I=!1;var aB=0;var ay=null;var K=null;var W=!1;var ah=!1;TryonPreview.prototype.setupLayout=function(){T=jsDom.createNode("div",{id:"mainArea"},"","parent",av);jsDom.css(av,{width:aI.width+"px",height:aI.height+"px"});jsDom.css(T,{overflow:"hidden",position:"absolute",width:aI.width+"px",height:aI.height+"px"});r();EventListener.addEventListener("FILE_LOAD_COMPLETE",C);EventListener.addEventListener("FILE_LOADING_INIT",B);EventListener.addEventListener("MODEL_CHOOSEN",a);EventListener.addEventListener("WEBCAM_OPEN",h);EventListener.addEventListener("ASK_FOR_CONFIRM",G);EventListener.addEventListener("RESET_VIEW_DEFAULT",z);EventListener.addEventListener("WEBCAM_CLOSE",z);EventListener.addEventListener("WEBCAM_RETAKE",h);EventListener.addEventListener("ADJUSTMENT_STARTED",U);EventListener.addEventListener("ALL_DONE",D);EventListener.addEventListener("SCALING",aP);EventListener.addEventListener("ROTATE",f);EventListener.addEventListener("FRAME_SCALING",aN);EventListener.addEventListener("FRAME_ROTATE",az);EventListener.addEventListener("APPLY_FRAME",m);EventListener.addEventListener("SCALE_UP",aU);EventListener.addEventListener("SCALE_DOWN",aQ);EventListener.addEventListener("FRAME_ROTATE_LEFT",aM);EventListener.addEventListener("FRAME_ROTATE_RIGHT",aq);EventListener.addEventListener("FRAME_RESET",ae);EventListener.addEventListener("FRAME_WITH_RESIZER",aR);EventListener.addEventListener("EnableResizer",y);EventListener.addEventListener("DisableResizer",Q);EventListener.addEventListener("swapMirror",O);au=null;aL.getImage(F);T.addEventListener("click",aK);T.addEventListener("touchstart",aK);if(typeof aI.BrandImg!=="undefined"){if(aI.BrandImg!=""){var aX=jsDom.createNode("a",{id:"imglink",href:aI.BrandUrl,target:"_blank"}," ","parent",av);var aW=jsDom.createNode("span",{id:"spantext"},aI.BrandTitle,"parent",aX);jsDom.css(aW,{display:"none",color:"#fff","font-size":"10px","text-align":"center !important","font-family":"sans-serif",background:"rgba(0,0,0,0.75)",padding:"5px",left:"24px","border-radius":"4px","-moz-border-radius":"4px","-webkit-border-radius":"4px",width:"84px","text-align":"cente",position:"absolute","z-index":"10"});var aV=jsDom.createNode("img",{id:"brandlogo",src:aI.BrandImg,style:"position:absolute;opacity:0.5;margin:0px;cursor:pointer;padding:0px;display:block;"},"","parent",aX);jsDom.nodeById("brandlogo").addEventListener("mouseover",l,!1);jsDom.nodeById("brandlogo").addEventListener("mouseout",ak,!1)}}};function l(){var aW=jsDom.nodeById("spantext");var aV=jsDom.nodeById("brandlogo");if(aW!=null&&aV!=null){jsDom.show("spantext");jsDom.css(aV,{opacity:"1"})}}
function ak(){var aW=jsDom.nodeById("spantext");var aV=jsDom.nodeById("brandlogo");if(aW!=null&&aV!=null){jsDom.hide("spantext");jsDom.css(aV,{opacity:"0.5"})}}
function h(aV){jsDom.clearNode(T);r();if(ao!=null){ao.setupCam()}else{ao=new WebcamToImage(T)}}
function z(aV){aL.getImage(F)}
function B(aV){r()}
function C(aV,aX,aY){r();if(window.File&&window.FileReader&&window.FileList&&window.Blob){reader=new FileReader();reader.onload=j;reader.readAsDataURL(aX[0]);E=!0}else{var aZ="data:image/"+aY+";base64,"+aX;F(aZ);aT(aZ)}
if(Y!==null){jsDom.remove(Y)}
var aW=document.getElementById("tryonbrowse");aW.value=""}
function j(aW){if(aF){var aV=new Image();aV.onload=function(){EXIF.getData(aV,function(){var aX=EXIF.pretty(this).split("\n");aB=(aX[0].split(":")[1].trim());ax.MobileAngle=aB.trim();aL.frameImage(ax);W=!0})};aV.src=aW.target.result}
F(aW.target.result)}
function P(aX,aW){var aV=document.getElementById(aX);if(aV!=null){setTimeout(function(){fadeIn(aV,"block")},aW)}}
function ai(aW){var aV=document.getElementById(aW);if(aV!=null){setTimeout(function(){fadeOut(aV,"block")},100)}}
function i(){var aW=this.naturalWidth;var aZ=this.naturalHeight;var aX=jsDom.getStyle(av,"width",!0);var a0=jsDom.getStyle(av,"height",!0);jsDom.hide(jsDom.nodeById("imageprelaoder"));ay=u(aW,aZ,aX,a0,!1);if(ay){var aV=jsDom.nodeById("canvasImage");if(aV==null){aD(ay)}
var aY=jsDom.nodeById("canvasImage");if(I){q(K,!0);I=!1;aT(K.src)}
if(ar){if(!Z){jsDom.css(K,{cssText:au.user});d=au.frame}
EventListener.dispatch("APPLY_FRAME",this,currentFrame)}
if(E){EventListener.dispatch("ADJUSTMENT_STARTED",t);E=!1;return}}}
function aD(aV){var a1=jsDom.nodeById("previewImage");var aX=document.createElement("canvas");var aW=aX.getContext("2d");aX.id="prevCanvas";aX.width=aV.width;aX.height=aV.height;var a0=aV.targetleft;var aZ=aV.targettop;aL.getImage(function(a2){if(a2){k=a2.lastframe}});if(aF){if(!Z){if(W){W=!1;switch(k.MobileAngle){case "8":aW.translate(aX.width/2,aX.height/2);aW.rotate(-90*Math.PI/180);aW.translate(-aX.width*0.5,-aX.width*0.5);break;case "3":aW.translate(aX.width/2,aX.height/2);aW.rotate(180*Math.PI/180);aW.translate(-aX.width*0.5,-aX.width*0.5);break;case "6":aW.translate(aX.width/2,aX.height/2);aW.rotate(90*Math.PI/180);aW.translate(-aX.width*0.5,-aX.width*0.5);break}}}}
aW.drawImage(a1,0,0,aG.width,aG.height,0,0,aX.width,aX.height);var aY=aX.toDataURL("image/png");K=new Image();K.src=aY;K.id="canvasImage";K.style.display="block";K.style.position="absolute";jsDom.nodeById("mainArea").appendChild(K);jsDom.css(K,{left:aV.targetleft+"px",top:aV.targettop+"px",padding:"0px",margin:"0px","max-width":"none"})}
function aT(aV){ar=!1;aL.saveImage(aV)}
function F(aV){if(aV){var a0="";if(aV.hasOwnProperty("lastused")){if(aV.lastused!=="image"){ar=!0;modelToload=aV[aV.lastused];var aX=aI.modelsimages.split(",");a0=aX[modelToload];o=parseInt(aV[aV.lastused]);if(aV.image!==""){e(aV)}
Z=!0;X=null}else{ar=!0;au=aV;a0=aV[aV.lastused];Z=!1}}else{ar=!1;a0=aV;Z=!1}
jsDom.clearNode(T);r();var aW=new Image();aW.onload=function(){var a1=Tools.reduceImage(aW,0.6);var a2=jsDom.nodeById("previewImage");jsDom.setAttr(a2,{src:a1})};aW.crossOrigin="Anonymous";aW.src=a0;var aZ=0;var aY=100;aG=jsDom.createNode("img",{id:"previewImage",src:a0,style:"position:absolute;margin:0px;padding:0px;display:none;"},"","parent",T);aG.onload=i}else{S(null);Z=!0;X=null}}
function S(aX){if(!aX){aX=aI.defaultmodel}
var aV=aI.modelsimages.split(",");var aW=aV[parseInt(aX)];o=aX;F(aW);aT(o)}
function a(aV,a1){r();F(a1);var aW=aI.modelsimages.split(",");var a0=0;for(var aX=0;aX<aW.length;aX++){var aZ=aW[aX].split("/");var aY=aZ[aZ.length-1];if(a1.indexOf(aY)>-1){Z=!0;o=a0=aX;break}}
aL.getImage(e);aL.saveImage(a0)}
function r(){var aV=jsDom.createNode("div",{id:"imageprelaoder",style:"font-family:Arial;position:absolute;font-size:12px;color:"+aI.fontcolor+";text-align:center;line-height:"+(parseInt(aI.height)+parseInt(aI.panelheight))+"px;width:100%;height:100%;background:url('"+aI.preloader+"') no-repeat 50% 50%;"},aI.loadingmsg,"parent",T)}
function aK(aV){EventListener.dispatch("AREA_CLICKED",this)}
function G(aV,aX,aW){Z=!1;aw=!1;jsDom.clearNode(T);r();aG=jsDom.createNode("img",{id:"previewImage",src:aX,style:"position:absolute;display:none;margin:0px;padding:0px;text-align:center;"},"","parent",T);if(aW){if(aW.enhancelight){I=!0;q(aG,!0)}}
aG.onload=i;aT(aX);E=!1}
function O(){ah=!0}
function u(aZ,a4,a3,aY,aX){var a5={width:0,height:0,fScaleToTargetWidth:!0};if((aZ<=0)||(a4<=0)||(a3<=0)||(aY<=0)){return a5}
var aW=a3;var a2=(a4*a3)/aZ;var aV=(aZ*aY)/a4;var a1=aY;var a0=(aV>a3);if(a0){a0=aX}else{a0=!aX}
if(a0){a5.width=Math.floor(aW);a5.height=Math.floor(a2);a5.fScaleToTargetWidth=!0}else{a5.width=Math.floor(aV);a5.height=Math.floor(a1);a5.fScaleToTargetWidth=!1}
a5.targetleft=Math.floor((a3-a5.width)/2);a5.targettop=Math.floor((aY-a5.height)/2);return a5}
function q(aW,aV){if(aV){jsDom.css(aW,{filter:"url(#brightness)","-webkit-filter":" brightness(150%)"})}}
function Q(){var aV=jsDom.nodeById("frame_live_resizer");if(aV!=null){jsDom.css(aV,{"pointer-events":"none",opacity:"0.5"})}}
function y(){var aV=jsDom.nodeById("frame_live_resizer");if(aV!=null){jsDom.css(aV,{"pointer-events":"auto",opacity:"1"})}}
function V(){var aV=jsDom.nodeById("frames");if(aV!=null){jsDom.hide(aV)}}
function x(){var aV=jsDom.nodeById("userThumb");if(aV!=null){jsDom.hide("userThumb")}}
function U(aV){Q();x();ab();ap=!0;aL.getImage(function(aW){if(aW.frame!==""){d=aW.frame;if(aF){R=jsDom.createNode("img",{id:"dummy_left",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAABTCAYAAACWP4ejAAAAdElEQVR42u3XIQ6AMAyF4VrkJI57TXA/JHdhlnMg1lJDMGymWTD/S57Zks+sohPpxMxmVd0lEgdOAIDxgI/rEgU2b+n0+jg7nvIKAAAAAAAAAAAAAAPX/SkKqAUCANAGajVbV/8hFoB/gZz9Vt6mxCgDNHMDWv0NBpsyaaoAAAAASUVORK5CYII="}," ","parent",T);jsDom.css(R,{left:d.Lleft+"px",position:"absolute",top:d.Ltop+"px"});aJ=jsDom.createNode("img",{id:"dummy_right",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAABTCAYAAACWP4ejAAAApklEQVR42u3XIQ6DQBCF4bWVSFwTNJfBIrhfZRVnwBfbhCugCGFfhzQNBmjaCcH8LxmxS/LtLKxgQ9iJpDTGeA+eGPAEADgesON69QI3q3anhpW5x6f4CgAAAAAAAAAAAAAH/u5fvECUIwAA68A0SWVpT8JSdf0jUFV2vWzf466TskzqewdQFHZ/Hf7cQpJsrv69g3GU8nzp5px3MKdpNrfCUQaY8wKLbv6PZO/wPgAAAABJRU5ErkJggg=="}," ","parent",T);jsDom.css(aJ,{left:d.Rleft+"px",position:"absolute",top:d.Rtop+"px"})}else{R=jsDom.createNode("img",{id:"dummy_left",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABf0lEQVQ4jZWSP0hCURTGf0dCCISEWiwCI9AoxE1wCF8uIkQtRVttzba4NNTSXGM2tvUHtAhCif5MgdAQb7GGRCRqiCgSBJfT4POBPnrVB5fL4XznO+fe84ELVDWhqgk3Tp9bEjCs++YXXlfXqKrm1Ym8qkZ7+dJTPE/V3OHywKR8/tLFjKUDJJcijEUyInLiEFDVKG/Px6zPXbqOuHWaZGhkQUTuATx2otXMsZst2/FkfJDRCZ9DYDdbptXMdUKP1T3Bk+mnXmnYxMW1OMmlsEOgXmnwZPo72+lMYPD+2nCQf0KbawD0qeqVFdz9WaCNTVU1PCIyA2T+WQyQEZGZjpEKBKeyDkpkOsTGYQCAu4tHzvYeAQhOBYACWE4UkZqqloilA/b+j7Zv8fm9tthL9Qto+2F4vCQiNej2wQCtZpHiftPu1IvZ1RCp5X68/SkR+ewSsEVgh6ppUC4+0PhoAeDze4mlwoxFrq23f7r+jqquWN6vWievqiuuRS5CroXfPpC2JqI4riYAAAAASUVORK5CYII="}," ","parent",T);jsDom.css(R,{left:d.Lleft+"px",position:"absolute",top:d.Ltop+"px"});aJ=jsDom.createNode("img",{id:"dummy_right",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABzUlEQVQ4jYWTT0hUURTGf2ewseTJWCj0lMEx+/MgxsFFkkQos2uRFQQuZ/qzyIWgmzZBkOTGAoW2EbQKoXBqE21MNxkPImIIH1KWDFmRmTGPIjenxbwm7zx5Hrib833nO9+5516ICFXNqWouilMXBQKpHfBtu2ZUdUbDMaOqmVq+1BSf4UNxitnpIu7Tzwaz55RNdjBNR3pERB6HBFQ1w9qnh1wbmI20OP4kS3PbeRF5Ywr8+fWSicvvKXk+ScciO3ikWrTorlYdJR2Lq3c7pb7hOEAs6N7HcrGJkucDYHc04hxrp7S0BsClm6dJOhYAJc9nudikqn0AseBi8qx/8UN2/Y1NFt3VUL7Czatqpg7IA/3Ad4O0a3c9JwYOc6ArxfTtZ1V3/6Mf2IiJyCgwxb79lgGX18tMDs3z9sUSJ8+lDSx11AZGRGQ0FqTmaDvUalj/ulJx9GDiFVBZI0CiJU5rZwMwB+Yan+O5NpND86GZt8aVW710Zx+JyI1agQRQwHNt7l1f4Oe3TaMw0RLn4lgvTs+CiFz4lzZeYiCUo/zjDu9ef+S3XxHZY8U52J2ice+wiNzfyg8JBCLtwNngABSAgoisRI63nZudvvNfuvW/5I2aJFYAAAAASUVORK5CYII="}," ","parent",T);jsDom.css(aJ,{left:d.Rleft+"px",position:"absolute",top:d.Rtop+"px"})}}else{if(aF){R=jsDom.createNode("img",{id:"dummy_left",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAABTCAYAAACWP4ejAAAAdElEQVR42u3XIQ6AMAyF4VrkJI57TXA/JHdhlnMg1lJDMGymWTD/S57Zks+sohPpxMxmVd0lEgdOAIDxgI/rEgU2b+n0+jg7nvIKAAAAAAAAAAAAAAPX/SkKqAUCANAGajVbV/8hFoB/gZz9Vt6mxCgDNHMDWv0NBpsyaaoAAAAASUVORK5CYII="}," ","parent",T);jsDom.css(R,{left:"52px",position:"absolute",top:"150px"});aJ=jsDom.createNode("img",{id:"dummy_right",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAABTCAYAAACWP4ejAAAApklEQVR42u3XIQ6DQBCF4bWVSFwTNJfBIrhfZRVnwBfbhCugCGFfhzQNBmjaCcH8LxmxS/LtLKxgQ9iJpDTGeA+eGPAEADgesON69QI3q3anhpW5x6f4CgAAAAAAAAAAAAAH/u5fvECUIwAA68A0SWVpT8JSdf0jUFV2vWzf466TskzqewdQFHZ/Hf7cQpJsrv69g3GU8nzp5px3MKdpNrfCUQaY8wKLbv6PZO/wPgAAAABJRU5ErkJggg=="}," ","parent",T);jsDom.css(aJ,{left:"149px",position:"absolute",top:"150px"})}else{R=jsDom.createNode("img",{id:"dummy_left",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABf0lEQVQ4jZWSP0hCURTGf0dCCISEWiwCI9AoxE1wCF8uIkQtRVttzba4NNTSXGM2tvUHtAhCif5MgdAQb7GGRCRqiCgSBJfT4POBPnrVB5fL4XznO+fe84ELVDWhqgk3Tp9bEjCs++YXXlfXqKrm1Ym8qkZ7+dJTPE/V3OHywKR8/tLFjKUDJJcijEUyInLiEFDVKG/Px6zPXbqOuHWaZGhkQUTuATx2otXMsZst2/FkfJDRCZ9DYDdbptXMdUKP1T3Bk+mnXmnYxMW1OMmlsEOgXmnwZPo72+lMYPD+2nCQf0KbawD0qeqVFdz9WaCNTVU1PCIyA2T+WQyQEZGZjpEKBKeyDkpkOsTGYQCAu4tHzvYeAQhOBYACWE4UkZqqloilA/b+j7Zv8fm9tthL9Qto+2F4vCQiNej2wQCtZpHiftPu1IvZ1RCp5X68/SkR+ewSsEVgh6ppUC4+0PhoAeDze4mlwoxFrq23f7r+jqquWN6vWievqiuuRS5CroXfPpC2JqI4riYAAAAASUVORK5CYII="}," ","parent",T);jsDom.css(R,{left:"40px",position:"absolute",top:"70px"});aJ=jsDom.createNode("img",{id:"dummy_right",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABzUlEQVQ4jYWTT0hUURTGf2ewseTJWCj0lMEx+/MgxsFFkkQos2uRFQQuZ/qzyIWgmzZBkOTGAoW2EbQKoXBqE21MNxkPImIIH1KWDFmRmTGPIjenxbwm7zx5Hrib833nO9+5516ICFXNqWouilMXBQKpHfBtu2ZUdUbDMaOqmVq+1BSf4UNxitnpIu7Tzwaz55RNdjBNR3pERB6HBFQ1w9qnh1wbmI20OP4kS3PbeRF5Ywr8+fWSicvvKXk+ScciO3ikWrTorlYdJR2Lq3c7pb7hOEAs6N7HcrGJkucDYHc04hxrp7S0BsClm6dJOhYAJc9nudikqn0AseBi8qx/8UN2/Y1NFt3VUL7Czatqpg7IA/3Ad4O0a3c9JwYOc6ArxfTtZ1V3/6Mf2IiJyCgwxb79lgGX18tMDs3z9sUSJ8+lDSx11AZGRGQ0FqTmaDvUalj/ulJx9GDiFVBZI0CiJU5rZwMwB+Yan+O5NpND86GZt8aVW710Zx+JyI1agQRQwHNt7l1f4Oe3TaMw0RLn4lgvTs+CiFz4lzZeYiCUo/zjDu9ef+S3XxHZY8U52J2ice+wiNzfyg8JBCLtwNngABSAgoisRI63nZudvvNfuvW/5I2aJFYAAAAASUVORK5CYII="}," ","parent",T);jsDom.css(aJ,{left:"145px",position:"absolute",top:"70px"})}}});an=new dragObject("canvasImage");ad=new dragObject("dummy_left");N=new dragObject("dummy_right")}
function ab(){var aV=jsDom.nodeById("frame");if(aV!=null){jsDom.remove(aV)}}
function aP(aV,aW){w=aW;aa(K,aC,aW)}
function f(aV,aW){aC=aW;aa(K,aW,w)}
function aN(aV,aW){M=aW;aa(aA,A,aW)}
function az(aV,aW){A=aW;aa(aA,aW,M)}
function aa(aX,aW,aV){var aY="0";if(g){aY="0"}
jsDom.css(aX,{"-ms-transform":"rotate("+aW+"deg) scale("+aV/100+", "+aV/100+") rotateY("+aY+"deg)","-webkit-transform":"rotate("+aW+"deg) scale("+aV/100+", "+aV/100+") rotateY("+aY+"deg)",transform:"rotate("+aW+"deg) scale("+aV/100+", "+aV/100+") rotateY("+aY+"deg)"})}
function D(){y();var aV=jsDom.nodeById("frames");if(aV!=null){jsDom.show(aV)}
af()}
function af(){var aV={};aV.Lleft=R.style.left.split("px").join("");aV.Ltop=R.style.top.split("px").join("");aV.Rleft=aJ.style.left.split("px").join("");aV.Rtop=aJ.style.top.split("px").join("");var aW=(Math.atan2(aV.Rtop-aV.Ltop,aV.Rleft-aV.Lleft)*180/Math.PI);if(aW<0){aW=360+(aW)}
ax.rotate=(aW);d=aV;ax.zoom=100;aL.frameImage(ax);aL.saveFrameData("",K.style.cssText);aL.saveFrameData(d,K.style.cssText);v=K.style.cssText;aT(K.src);aE()}
function aE(){an.StopListening(!0);ad.StopListening(!0);N.StopListening(!0);if(R&&aJ){jsDom.remove(R);jsDom.remove(aJ);R=null;aJ=null}
E=!1}
function J(){var aV=jsDom.createNode("div",{id:"adjustButton",style:"position: absolute; cursor:pointer; width:18px;height:18px;overflow:hidden; bottom: 5px;left:5px;"},"","parent",av);jsDom.html(aV,'<img src="'+aI.adjustmenticon+'" width="100%" height="100%"/>');aV.addEventListener("click",function(){EventListener.dispatch("ADJUSTMENT_STARTED",t);X=jsDom.nodeById("frame");ab();jsDom.remove(this)});aV.addEventListener("touchstart",function(){EventListener.dispatch("ADJUSTMENT_STARTED",t);X=jsDom.nodeById("frame");ab();jsDom.remove(this)})}
function e(aV){if(aV.image===""){return}
var aY=jsDom.nodeById("userThumb");if(aY!=null){jsDom.remove(aY)}
aY=jsDom.createNode("div",{id:"userThumb",style:"position: absolute; overflow:hidden;cursor:pointer; width: 40px; height:auto; bottom: 5px;right: 5px;"},"","parent",av);jsDom.html(aY,'<img src="'+aV.image+'" id="userimage" style="display:none; border:3px solid #fff"/>');var aX=jsDom.nodeById("userimage");var aZ=aX.naturalWidth/30;var aW=Math.round(aX.naturalHeight/aZ);jsDom.css(aX,{width:"30px",height:aW+"px",display:"block"});jsDom.setAttr(aX,{width:"30",height:aW});aY.addEventListener("click",function(){aV.lastused="image";F(aV);aL.saveImage(aV.image);d=aV.frame;var a0=jsDom.nodeById("PointerSetting");H();jsDom.remove(this)});aY.addEventListener("touchstart",function(){aV.lastused="image";F(aV);aL.saveImage(aV.image);d=aV.frame;var a0=jsDom.nodeById("PointerSetting");H();jsDom.remove(this)})}
function aR(aV,aX,aW,aZ,aY){c(aX,aW,aZ,aY)}
function aU(aV,aX,aW,aZ,aY){c(aX,aW,aZ,aY)}
function aQ(aV,aX,aW,aZ,aY){c(aX,aW,aZ,aY)}
function aM(aV,aX,aW,aZ,aY){c(aX,aW,aZ,aY)}
function aq(aV,aX,aW,aZ,aY){c(aX,aW,aZ,aY)}
function ae(aV){X.style.cssText=aH;X.style.display="block";EventListener.dispatch("INIT_RESIZER",this,X)}
function c(aW,aV,aZ,aY){if(X){var aX=0;jsDom.css(X,{display:"block",left:aZ,top:aY,"-ms-transform":"rotate("+aV+"deg) scale("+aW/100+", "+aW/100+") rotateY("+aX+"deg)","-webkit-transform":"rotate("+aV+"deg) scale("+aW/100+", "+aW/100+") rotateY("+aX+"deg)",transform:"rotate("+aV+"deg) scale("+aW/100+", "+aW/100+") rotateY("+aX+"deg)"})}
aL.getImage(function(a0){k=a0.lastframe});k.zoom=aW;k.rotate=aV;aL.frameImage(k)}
function aO(){X=jsDom.nodeById("frame");var aW=X.style.left.split("px").join("");var aV=X.style.top.split("px").join("");aL.getImage(function(aX){k=aX.lastframe});k.fleft=aW;k.ftop=aV;k.setlogic="true";aL.frameImage(k)}
function H(){var aV=jsDom.nodeById("PointerSetting");if(aV!=null){jsDom.show("PointerSetting")}}
function am(){var aV=jsDom.nodeById("PointerSetting");if(aV!=null){jsDom.hide("PointerSetting")}}
function m(a1,a6,a9,aX){var aY=jsDom.nodeById("confirmationArea");var a5=jsDom.nodeById("tryon_webcam");if(aY||a5){return}
X=jsDom.nodeById("frame");if(X!=null){var bb=X.style.left;var a2=X.style.top;EventListener.dispatch("INIT_RESIZER",this,X,bb,a2);jsDom.remove(X);if(L!=null){L.StopListening(!0)}}
var a4=5;var bc=new Image();bc.onload=function(){var be=Tools.reduceImage(bc,0.6);var bd=jsDom.nodeById("frame");jsDom.setAttr(bd,{src:be})};bc.crossOrigin="Anonymous";bc.src=a6;if(Z){am();var a7=aI.modeldata.split(",");var a0=a7[o];var a8=a0.split(":");var ba=a8[0].split("-");var aV=a8[1].split("-");var a3=2.2*(parseFloat(aV[0]-parseFloat(ba[0])));var aW=ba[0]-(a3/3.8);var aZ=ba[1];X=jsDom.createNode("img",{id:"frame",src:a6},"","parent",T);jsDom.css(X,{display:"none",position:"absolute",opacity:"0.84",left:65+"px",width:a3+"px"});X.onload=function(){var bd=X.naturalWidth;var bf=X.naturalHeight;var be=a3/bd;frameHeight=bf*be;X.style.imageRendering="optimizeQuality";jsDom.css(X,{top:141+"px",height:"auto",display:"block","z-index":"99999"});jsDom.setAttr(X,{width:a3,height:frameHeight});aH=X.style.cssText;EventListener.dispatch("INIT_RESIZER",this,X,aW,aZ);L=new dragObject("frame")};return}else{aw=!0;aL.getImage(function(bd){k=bd.lastframe;d=bd.frame});H();var a3=2.2*(parseInt(d.Rleft)-parseInt(d.Lleft));a4=5;if(k.setlogic=="true"){var aW=k.fleft;var aZ=k.ftop}else{var aW=(d.Lleft)-(a3/4.4);var aZ=d.Ltop}
X=jsDom.createNode("img",{id:"frame",src:a6},"","parent",T);jsDom.css(X,{display:"none",position:"absolute",opacity:"0.84",left:65+"px",width:a3+"px","z-index":"99999999"});jsDom.css(X,{"-ms-transform":"rotate"+d.rotate+"deg)","-webkit-transform":"rotate("+d.rotate+"deg)",transform:"rotate("+d.rotate+"deg)"});X.onload=function(){var bd=X.naturalWidth;var bf=X.naturalHeight;var be=a3/bd;frameHeight=bf*be;X.style.imageRendering="optimizeQuality";if(k.setlogic=="true"){jsDom.css(X,{top:parseFloat(aZ)+"px"})}else{jsDom.css(X,{top:parseFloat(aZ)-(frameHeight/a4)+"px"})}
jsDom.css(X,{height:frameHeight+"px",display:"block","z-index":"9999999",position:"absolute",opacity:"0.96","-ms-transform":"rotate("+k.rotate+"deg) scale("+k.zoom/100+", "+k.zoom/100+") ","-webkit-transform":"rotate("+k.rotate+"deg) scale("+k.zoom/100+", "+k.zoom/100+") ",transform:"rotate("+k.rotate+"deg) scale("+k.zoom/100+", "+k.zoom/100+") "});jsDom.setAttr(X,{width:a3,height:frameHeight});aH=X.style.cssText;EventListener.dispatch("INIT_RESIZER",this,X,aW,aZ);L=new dragObject("frame");X.addEventListener("mousemove",aO)}}}
this.setupLayout()};var WebcamToImage=function(e){var h=this;var p=e;var x=settings_tryon;var z=null;var i=null;var C=400;var q=300;var a=!1;var c=!1;var b=!1;var k;var l=!1;var r=navigator.userAgent.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i);navigator.getUserMedia=(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia);WebcamToImage.prototype.setupCam=function(){EventListener.dispatch("DisableResizer",this);var F=jsDom.nodeById("imglink");if(F!=null){jsDom.hide("imglink")}
t();A();if(!EventListener.hasEventListener("WEBCAM_CLOSE",v,h,!0)){EventListener.addEventListener("WEBCAM_CLOSE",v,h,!0);EventListener.addEventListener("WEBCAM_TAKE_PICTURE",s,h);EventListener.addEventListener("FLASH_CAM_DENIED",d);EventListener.addEventListener("WEBCAM_NOT_FOUND",u);if(navigator.getUserMedia){var D=function(){z=jsDom.createNode("video",{id:"tryon_webcam",width:C,height:q,style:"position:absolute;"},"","parent",p);jsDom.css(z,{transform:"rotateY(0deg)","-webkit-transform":"rotateY(0deg);","-moz-transform":"rotateY(0deg)",display:"none;"});i=jsDom.createNode("canvas",{id:"tryon_canvas",width:x.width+"",height:x.height+"",style:"position:absolute;display:none;"},"","parent",p);var H=jsDom.getStyle(p,"width",!0);var I=jsDom.getStyle(p,"height",!0);666;var G=g(C,q,H,I,!1);if(G){z.width=G.width;z.height=G.height;jsDom.css(z,{left:G.targetleft+"px"});jsDom.css(z,{top:G.targettop+"px"})}
l=!1;w(z)};var E=function(){l=!0;y()};navigator.getUserMedia({audio:!1,video:!0},D,E)}else{l=!0;y()}}};function t(){var D=jsDom.nodeById("userThumb");if(D!=null){jsDom.hide("userThumb")}}
function u(){alert("Webcam Not Found")}
function w(F){var D=function(G){EventListener.dispatch("SWAP_CAMBAR",this);k=G;if(G.getVideoTracks().length==0){EventListener.dispatch("noCamFound",this);v(!0);return}
if(window.URL){F.src=window.URL.createObjectURL(G)}else{F.src=G}
jsDom.css(F,{display:"block"});F.play();b=!0;EventListener.dispatch("WEBCAM_READY",this);j()};var E=function(G){if(G.name=="PermissionDeniedError"){EventListener.dispatch("cameraPermissionDenied",this);EventListener.dispatch("WEBCAM_NOT_FOUND",this)}
b=!1;v(!0)};navigator.getUserMedia({audio:!1,video:!0},D,E)}
function j(){var D=jsDom.createNode("div",{style:"position:absolute; top:0;left:0;background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAAHe9q7oAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkRFMzM4RUI1NTIzODExRTRBRTVBRTRFMjA0NzM2OTVBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkRFMzM4RUI2NTIzODExRTRBRTVBRTRFMjA0NzM2OTVBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6REUzMzhFQjM1MjM4MTFFNEFFNUFFNEUyMDQ3MzY5NUEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6REUzMzhFQjQ1MjM4MTFFNEFFNUFFNEUyMDQ3MzY5NUEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6Dw1B6AAAAK0lEQVR42mJQVVbpBwggBhABEECMYBYQAAQQnMHEAAUAAcYCE4EBJgY0AAAI3ATyMVu6KgAAAABJRU5ErkJggg==); width:"+x.width+"px; height:20px;"},"","parent",p);var F=jsDom.createNode("label",{style:"color:#fff; font-size:12px;float:right; width:89px; line-height:20px; font-family:Arial; display:block;"},"","parent",D);jsDom.html(F,"Low light");var H=jsDom.createNode("input",{type:"checkbox",id:"lowlight",style:"float:left;margin:3px !important;"},"","parent",F);var E=jsDom.createNode("label",{style:"color:#fff;float:left; font-size:12px; line-height:20px; width:89px; font-family:Arial; display:block;"},"","parent",D);jsDom.html(E,"Mirror mode");var G=jsDom.createNode("input",{type:"checkbox",id:"mirrormode",style:"float:left;margin:3px !important;"},"","parent",E);G.addEventListener("click",function(I){a=jsDom.getProperty(G,"checked");B(a);EventListener.dispatch("swapMirror",this);o(I)});G.addEventListener("touchstart",function(I){a=jsDom.getProperty(G,"checked");B(a);o(I)});lowlight.addEventListener("click",function(I){c=jsDom.getProperty(lowlight,"checked");m(c);o(I)});lowlight.addEventListener("touchstart",function(I){c=jsDom.getProperty(lowlight,"checked");m(c);o(I)})}
function B(D){if(D){jsDom.css(z,{transform:"scaleX(-1)","-webkit-transform":"scaleX(-1);","-moz-transform":"scaleX(-1)",display:"block;"})}else{jsDom.css(z,{transform:"scaleX(1)","-webkit-transform":"scaleX(1);","-moz-transform":"scaleX(1)",display:"block;"})}}
function m(D){if(D){jsDom.css(z,{filter:"url(#brightness)","-webkit-filter":" brightness(150%)",display:"block;"})}else{jsDom.removeStyle(z,"filter");jsDom.css(z,{"-webkit-filter":" brightness(100%)",display:"block;"})}}
function y(){EventListener.dispatch("SWAP_CAMBAR",this);z=jsDom.createNode("div",{id:"tryon_webcam",width:x.width,height:x.height,style:"position:absolute;top:0px;display:block;"},"","parent",p);jsDom.html(z,'<object type="application/x-shockwave-flash"  data="'+x.webcampath+'" width="'+x.width+'" height="'+x.height+'" id="webcam_flash"><param name="menu" value="false"><param name="scale" value="noScale"><param name="allowFullscreen" value="false"><param name="wmode" value="opaque"><param name="allowScriptAccess" value="always" /></object>');EventListener.addEventListener("WEBCAM_READY",function(){b=!0})}
function s(E){if(b){if(l){var G=jsDom.nodeById("webcam_flash");if(G!=null){var J=G._snap();var H="data:image/jpg;base64,"+J;EventListener.dispatch("ASK_FOR_CONFIRM",this,H,{mirror:!1,enhancelight:!1});v(!1)}}else{var I=z.videoHeight/x.height;if(a){i.width=z.videoWidth;i.height=z.videoHeight;var D=i.getContext("2d");D.scale(-1,1);D.drawImage(z,-z.videoWidth,0);D.setTransform(1,0,0,1,0,0);a=!1}else{i.getContext("2d").drawImage(z,-1*parseInt(z.style.left)*I,-1*parseInt(z.style.top)*I,parseInt(x.width)*I,parseInt(x.height)*I,0,0,x.width,x.height)}
var F=i.toDataURL("image/png");v(!1);EventListener.dispatch("ASK_FOR_CONFIRM",this,F,{mirror:a,enhancelight:c})}}else{EventListener.dispatch("requestAllowCamera",this)}}
function v(F){if(navigator.getUserMedia){if(k){k.getVideoTracks()[0].stop();var E=window.MediaStream;if(typeof E==="undefined"&&typeof webkitMediaStream!=="undefined"){E=webkitMediaStream}
if(typeof E!=="undefined"&&!("stop" in E.prototype)){E.prototype.stop=function(){this.getAudioTracks().forEach(function(G){G.stop()});this.getVideoTracks().forEach(function(G){G.stop()})}}}
if(F==!0){EventListener.dispatch("RESET_VIEW_DEFAULT",this)}
EventListener.dispatch("WEBCAM_CLOSED",this)}else{var D=jsDom.nodeById("tryon_webcam");if(D!=null){jsDom.html(D,"")}
EventListener.dispatch("WEBCAM_CLOSED",this)}}
function A(){stream=null;EventListener.removeEventListener("WEBCAM_CLOSE",v,h);EventListener.removeEventListener("WEBCAM_TAKE_PICTURE",s,h)}
function d(){var D=jsDom.nodeById("tryon_webcam");jsDom.remove(D);y()}
function g(H,M,L,G,F){var N={width:0,height:0,fScaleToTargetWidth:!0};if((H<=0)||(M<=0)||(L<=0)||(G<=0)){return N}
var E=L;var K=(M*L)/H;var D=(H*G)/M;var J=G;var I=(D>L);if(I){I=F}else{I=!F}
if(I){N.width=Math.floor(E);N.height=Math.floor(K);N.fScaleToTargetWidth=!0}else{N.width=Math.floor(D);N.height=Math.floor(J);N.fScaleToTargetWidth=!1}
N.targetleft=Math.floor((L-N.width)/2);N.targettop=Math.floor((G-N.height)/2);return N}
function o(D){if(D.stopPropagation){D.stopPropagation()}else{if(window.event){window.event.cancelBubble=!0}}}
function f(){stream=null;EventListener.removeEventListener("WEBCAM_CLOSE",v,h);EventListener.removeEventListener("WEBCAM_TAKE_PICTURE",s,h)}
h.setupCam()}